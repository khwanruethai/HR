@{
    Layout = "_Layout";
}
@using HR.Models;
@using Microsoft.AspNetCore.Mvc;
@using Microsoft.AspNetCore.Http;
@using System.Globalization;
@{
    string tab = Context.Session.GetString("empTab");
    CultureInfo en = new CultureInfo("EN");
}
<style>
    .card.hovercard .cardheader {
        background-image: url(../images/hrBG.jpg);
        background-size: cover;
        height: 135px;
    }

    .card.hovercard .avatar {
        position: relative;
        top: -50px;
        margin-bottom: -50px;
    }

        .card.hovercard .avatar img {
            width: 100px;
            height: 100px;
            max-width: 100px;
            max-height: 100px;
            -webkit-border-radius: 50%;
            -moz-border-radius: 50%;
            border-radius: 50%;
            border: 5px solid rgba(255,255,255,0.5);
        }

    .btn-file {
        position: relative;
        overflow: hidden;
    }

        .btn-file input[type=file] {
            position: absolute;
            top: 0;
            right: 0;
            min-width: 100%;
            min-height: 100%;
            font-size: 100px;
            text-align: right;
            filter: alpha(opacity=0);
            opacity: 0;
            outline: none;
            background: white;
            cursor: inherit;
            display: block;
        }

    p {
        font-size: 14px;
    }

    .panel {
        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.18);
    }

    .row {
        margin-right: 0px;
        margin-left: 0px;
    }
</style>
<div id="page-wrapper">
    <div class="row">
        <div class="col-lg-12">
            <h1 class="page-header">ข้อมูลพนักงาน</h1>
        </div>
        <!-- /.col-lg-12 -->
    </div>
    <!-- /.row -->
    <div class="row">
        <div class="col-lg-4 col-md-5">
            <div class="col-sm-12">
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        พนักงาน
                    </div>
                    <div class="panel-body">
                        <div class="card hovercard">
                            <div class="cardheader">
                            </div>
                            <div class="avatar">
                                @{Html.BeginForm("Upload", "Employee",FormMethod.Post, new { enctype = "multipart/form-data" });}
                                <img id="imgEmp" name="imgEmp" alt="" src="@ViewData["profile_img"]">

                                @*<span class="btn btn-info btn-file selectFile">
                                    
                                </span>*@
                                <span class="btn btn-info btn-file">
                                    <i class="fa fa-camera"></i><input id="selectFile" name="selectFile" type="file"> อัพโหลดรูปประจำตัว
                                </span>
                                @Html.TextBox("emp_code", ViewData["emp_code"], new { @class="form-control", @type="hidden"})
                                @Html.TextBox("emp_id", ViewData["emp_id"], new { @class="form-control", @type="hidden"})
                                <span class="uploadImg">
                                    <button type="submit" class="btn btn-primary"><i class="fa fa-save"></i> บันทึกรูปภาพ</button>
                                </span>
                               @{Html.EndForm();}
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-12">
                                <h5 style="color:gray;font-weight:bold" class="text-right">ข้อมูลพนักงาน 
                                <a title="แก้ไขข้อมูลพนักงาน" class="emp_edit" data-toggle="modal" data-target="#myModalEmpEdit"><i class="fa fa-edit"></i></a>
                                
                                </h5>
                                <hr />
                                <div class="data_emp">
                                    <h5 style="color:cornflowerblue"><span class="btn btn-circle btn-success"><i class="fa fa-user"></i></span> รหัสพนักงาน / ชื่อ-นามสกุล</h5>
                                    <blockquote>
                                        <p> @ViewData["emp_code"] </p>
                                        <p> @ViewData["emp_name_th"]</p>
                                        <p> @ViewData["emp_name_en"]</p>
                                    </blockquote>
                                    <h5 style="color:cornflowerblue"> <span class="btn btn-circle btn-info"><i class="fa fa-check"></i></span> ประเภท</h5>
                                    <blockquote>
                                        <p>   @ViewData["emp_type"]</p>
                                    </blockquote>
                                    <h5 style="color:cornflowerblue"> <span class="btn btn-circle btn-warning"><i class="fa fa-check"></i></span> สถานะ</h5>
                                    <blockquote>
                                        <p>   @ViewData["emp_status"]</p>
                                    </blockquote>
                                    <h5 style="color:cornflowerblue"><span class="btn btn-circle btn-primary"><i class="fa fa-calendar"></i></span>  วันที่เริ่มงาน</h5>
                                    <blockquote>
                                        <p> @ViewData["emp_start_date"]</p>
                                    </blockquote>
                                    <h5 style="color:cornflowerblue"><span class="btn btn-circle btn-danger"><i class="fa fa-calendar"></i></span>  วันที่ลาออก</h5>
                                    <blockquote>
                                        @*@if (ViewData["emp_status"].ToString() == "ลาออก")
                                        {
                                            <p> @ViewData["emp_end_date"]</p>
                                        }
                                        else
                                        {
                                            <p>-</p>
                                            <p><a class=""><span><i class="fa fa-calendar"></i></span> ลาออก</a></p>
                                        }*@
                                       
                                    </blockquote>
                                </div>
                            </div>
                        </div>
                      
                        <!--Modal edit emp-->
                        <div class="modal fade" id="myModalEmpEdit" role="dialog">
                            <div class="modal-dialog">
                                <!-- Modal content-->
                                <div class="modal-content">
                                    @{ Html.BeginForm("editEmp", "Employee", FormMethod.Post);}
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                                        <h4 class="modal-title">แก้ไข ข้อมูลพนักงาน</h4>
                                    </div>
                                    <div class="modal-body">
                                        <div class="form-group">
                                            <div class="row">
                                                <div class="col-sm-3">
                                                    ชื่อ-นามสกุล
                                                </div>
                                                <div class="col-sm-9">
                                                    @Html.DropDownList("emp_person_edit", ViewData["person_edit"] as List<SelectListItem>, new { @class = "form-control select2", @style = "width:100%" })
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="row">
                                                <div class="col-sm-3">
                                                    วันที่เริมงาน
                                                </div>
                                                <div class="col-sm-9">
                                                 @Html.TextBox("emp_start_edit", ViewData["emp_start_date"], new { @class = "form-control" })
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="row">
                                                <div class="col-sm-3">
                                                    ประเภทพนักงาน
                                                </div>
                                                <div class="col-sm-9">
                                                    @Html.DropDownList("type_", ViewData["type_"] as List<SelectListItem>, new { @class = "form-control" })
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                   @Html.TextBox("emp_id", ViewData["emp_id"], new { @class = "form-control", @type = "hidden" })
                                   
                                    <div class="modal-footer">
                                        <input type="submit" class="btn btn-primary" value="แก้ไขข้อมูล" />
                                        <button type="button" class="btn btn-default" data-dismiss="modal">ยกเลิก</button>
                                    </div>
                                    @{ Html.EndForm();}
                                </div>

                            </div>
                        </div>
                        <!--end modal-->
                    </div>
                    <div class="panel-footer">

                    </div>
                </div>
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        ข้อมูลการติดต่อ <span class="contact_edit"> <a title="แก้ไขข้อมูลการติดต่อ" style="color:white" data-target="#myModal" data-toggle="modal"><i class="fa fa-edit"></i></a></span>
                    </div>
                    <div class="panel-body">
                        <div class="form_input_contact">
                          
                        </div>
                        <div class="data_contact">
                            <div class="form-group">
                                <div class="row">
                                    <div class="col-sm-12">
                                        <h5 style="color:cornflowerblue"><span class="btn btn-primary btn-circle"><i class="fa fa-envelope"></i></span> E-mail</h5>
                                        <blockquote>
                                            <p>@ViewData["emp_email"]</p>
                                        </blockquote>
                                        <h5 style="color:cornflowerblue"><span class="btn btn-warning btn-circle"><i class="glyphicon glyphicon-phone-alt"></i></span> เบอร์โต๊ะ</h5>
                                        <blockquote>
                                            <p>@ViewData["emp_table"]</p>
                                        </blockquote>
                                        <h5 style="color:cornflowerblue"><span class="btn btn-success btn-circle"><i class="glyphicon glyphicon-earphone"></i></span> โทรศัพท์</h5>
                                        <blockquote>
                                            <p>@ViewData["emp_phone"]</p>
                                        </blockquote>
                                        <h5 style="color:cornflowerblue"><span class="btn btn-info btn-circle"><i class="glyphicon glyphicon-earphone"></i></span> มือถือ1</h5>
                                        <blockquote>
                                            <p>@ViewData["emp_mobile1"]</p>
                                        </blockquote>
                                        <h5 style="color:cornflowerblue"><span class="btn btn-info btn-circle"><i class="glyphicon glyphicon-earphone"></i></span> มือถือ2</h5>
                                        <blockquote>
                                            <p>@ViewData["emp_mobile2"]</p>
                                        </blockquote>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="panel-footer">
                    </div>

                    <!---modal edit contact-->
                    <div class="modal fade" id="myModal" role="dialog">
                        <div class="modal-dialog">

                            <!-- Modal content-->
                           
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                                    <h4 class="modal-title">แก้ไข ข้อมูลการติดต่อ</h4>
                                </div>
                                <div class="modal-body">
                                    @Html.Partial("~/Views/Employee/edit_contact.cshtml")
                          
                                </div>
                                <div class="modal-footer">
                                   
                                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                </div>
                            </div>
                         
                        </div>
                    </div>
                    <!--end edit contact-->
                </div>

                <!----end contact-->
            </div>
        </div>
        <div class="col-lg-8 col-md-7">
            <div class="col-lg-12">
                <div class="row">
                    <div class="col-sm-12">
                        <div class="panel panel-primary">
                            <div class="panel-heading">
                                ข้อมูล
                            </div>
                            <!-- /.panel-heading -->
                            <div class="panel-body">
                                <!-- Nav tabs -->
                                <ul class="nav nav-tabs">
                                    <li class="active">
                                        <a href="#position" data-toggle="tab" class="position" onclick="tab('position');">ข้อมูลตำแหน่งงาน</a>
                                    </li>
                                    <li>
                                        <a href="#home" data-toggle="tab" class="home" onclick="tab('home');">ประวัติส่วนตัว</a>
                                    </li>
                                    <li>
                                        <a href="#profile" data-toggle="tab" class="profile" onclick="tab('profile');">ข้อมูลเงินเดือน</a>
                                    </li>
                                    <li>
                                        <a href="#messages" data-toggle="tab" class="messages" onclick="tab('messages');">กองทุนสำรองเลี้ยงชีพ</a>
                                    </li>
                                    <li>
                                        <a href="#settings" data-toggle="tab" class="setting" onclick="tab('setting');">ชมเชย/ตักเตือน</a>
                                    </li>
                                </ul>
                                <!-- Tab panes -->
                                <div class="tab-content">
                                    <div class="tab-pane fade in active" id="position">
                                        <div class="form-group">
                                            <h5 style="color:gray;font-weight:bold">ข้อมูลตำแหน่งงาน <a title="แก้ไขข้อมูลตำแหน่งงาน" class="edit_position"><i class="fa fa-edit"></i></a></h5>
                                            <hr />
                                        </div>
                                      
                                        <!---end update-->
                                 
                                        <div class="form-group">
                                            <div class="row">
                                                @{Html.BeginForm("addPosition", "Employee", FormMethod.Post); }
                                                <div class="col-lg-12">
                                                    
                                                    <div class="col-md-4 position_null">
                                                        <a><span class="btn btn-default" style="border-style:dotted; border-width:2px;background-color:white;border-color:dodgerblue"><i class="fa fa-plus" style="color:dodgerblue"></i></span>  เพิ่มตำแหน่งงาน</a>
                                                    </div>
                                                    <div class="col-md-8 text-left">
                                                        <a data-toggle="modal" data-target="#myModalPositionChangeList"><span><i class="fa fa-list"></i> ประวัติการเปลี่ยน/ย้ายตำแหน่ง</span></a>
                                                        <a data-toggle="modal" data-target="#myModalPositionResignList"><span><i class="fa fa-list"></i> ประวัติการลาออกจากตำแหน่ง</span></a>
                                                    </div>
                                                    <div class="form_position" style="border:1px dotted #2196f3;">
                                                        <br />

                                                        <div class="form-group">
                                                            <div class="row">
                                                                <div class="col-sm-2">
                                                                    ตำแหน่ง
                                                                </div>
                                                                <div class="col-sm-4">
                                                                    @Html.DropDownList("position", ViewData["position_dropdown"] as List<SelectListItem>, new { @class = "form-control select2", @style = "width:100%" })
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <div class="row">
                                                                <div class="col-sm-2">
                                                                    บริษัท
                                                                </div>
                                                                <div class="col-sm-4">
                                                                    <div class="dropComp"> @Html.DropDownList("company", ViewData["company"] as List<SelectListItem>, new { @class = "form-control select2", @style = "width:100%", @onchange = "myFunctionCompany()" })</div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <div class="row">
                                                                <div class="col-sm-2">
                                                                    ฝ่าย
                                                                </div>
                                                                <div class="col-sm-4">
                                                                    <div class="dropSect">
                                                                        @Html.DropDownList("section", ViewData["section"] as List<SelectListItem>, new { @class = "form-control select2", @style = "width:100%", @onchange = "myFunctionSection()" })

                                                                    </div>
                                                                    @Html.TextBox("txtsection", "", new { @class = "form-control", @type = "hidden" })
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <div class="row">
                                                                <div class="col-sm-2">
                                                                    แผนก
                                                                </div>
                                                                <div class="col-sm-4">
                                                                    <div class="dropDept">
                                                                        @Html.DropDownList("department", ViewData["department"] as List<SelectListItem>, new { @class = "form-control select2", @style = "width:100%" })

                                                                    </div>
                                                                    @Html.TextBox("txtdepartment", "", new { @class = "form-control", @type = "hidden" })
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <div class="row">
                                                                <div class="col-sm-2">
                                                                    ประเภทพนักงาน
                                                                </div>
                                                                <div class="col-sm-4">
                                                                    @Html.DropDownList("type", ViewData["type_emp"] as List<SelectListItem>, new { @class = "form-control", @style = "width:100%" })
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <div class="row">
                                                                <div class="col-sm-2">
                                                                    วันที่เริ่มงาน
                                                                </div>
                                                                <div class="col-sm-4">
                                                                    @Html.TextBox("start", "", new { @class = "form-control datepicker" })
                                                                    @Html.TextBox("emp_id", ViewData["emp_id"], new { @class = "form-control", @type = "hidden" })
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <div class="row">
                                                                <div class="col-sm-12 text-center">
                                                                    <input type="submit" value="บันทึกข้อมูล" class="btn btn-primary" />
                                                                    <a class="btn btn-default cancel_position"> ยกเลิก</a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        @{Html.EndForm();}
                                                    </div>
                                                    </div>
                                                </div>
                                            </div>
                                                    <br />
                                        <div class="panel panel-default">
                                            <div class="panel-heading">
                                                <i class="fa fa-star fa-fw"></i> ตำแหน่งงาน
                                            </div>
                                            <!-- /.panel-heading -->
                                            <div class="panel-body">
                                                <ul class="timeline" style="left: -45%;">

                                                    @{ int count = 0; string hd = "";

                                                        List<emp_positionModel> em = ViewData["position"] as List<emp_positionModel>;
                                                        count = em.Count();

                                                        if (count <= 1)
                                                        {

                                                            hd = "hidden";
                                                        }
                                                    }
                                                    @foreach (var item in ViewData["position"] as List<emp_positionModel>)
                                                    {

                                                        <li class="timeline-inverted">
                                                            <div class="timeline-badge warning" style="left: 48%;">
                                                                <i class="fa fa-star"></i>
                                                            </div>
                                                            <div class="timeline-panel">
                                                                <div class="text-right">
                                                                    <a href="#" class="changePosition" data-toggle="modal" data-target="#myModalPositionChange" ref="@item.pos_id"><i class="fa fa-gears"></i> เปลี่ยนตำแหน่ง</a>
                                                                    <a href="#" class="resign_position bs-tooltip-top @hd" data-toggle="modal" title="ลาออกจากตำแหน่ง" data-target="#myModalResignPosition" ref="@item.pos_id"><i class="fa fa-user-times"></i> ลาออกจากตำแหน่ง</a>

                                                                </div>
                                                                <div class="text-right">
                                                                    @if (item.pos_active == "Y")
                                                                    {
                                                                        <p> <span class="text-green" style="color: green;"><i class="fa fa-circle text-green"></i> </span> ตำแหน่งหลัก</p>
                                                                    }
                                                                    else
                                                                    {

                                                                        <a class="btn btn-default changeMain" ref="@item.pos_id"><span><i class="fa fa-check"></i> ใช้เป็นตำแหน่งหลัก</span></a>
                                                                    }

                                                                </div>
                                                                <div class="timeline-heading">
                                                                    <h5 class="timeline-title">ตำแหน่ง : @item.pos_position_name</h5>
                                                                </div>
                                                                <div class="timeline-body">
                                                                    <p>ประเภท : @item.pos_type_name</p>
                                                                    <p>แผนก : @item.pos_dept_name </p>
                                                                    <p>ฝ่าย : @item.pos_sect_name</p>
                                                                    <p>บริษัท : @item.pos_comp_name</p>
                                                                </div>
                                                                <div>
                                                                    <hr />
                                                                    <div class="col-sm-12 text-right">

                                                                        <a class="btn btn-warning edPosition" data-toggle="modal" data-target="#myModalPosition" ref="@item.pos_id"><i class="fa fa-edit"></i> แก้ไข</a>
                                                                        @*<a class="btn btn-danger delPosition" ref="@item.pos_id"><i class="fa fa-trash"></i> ลบ</a>*@

                                                                    </div>

                                                                </div>

                                                            </div>
                                                        </li>
                                                    }
                                                </ul>
                                            </div>
                                            <!--Modal resign position-->
                                            <div class="modal fade" id="myModalResignPosition" role="dialog">
                                                <div class="modal-dialog modal-lg">

                                                    <!-- Modal content-->
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                                                            <h4 class="modal-title">ลาออกจากตำแหน่ง</h4>
                                                        </div>
                                                        @{ Html.BeginForm("insert_position_resign","EmpPositionResign",FormMethod.Post);}
                                                        <div class="modal-body">
                                                            <div class="form-group">
                                                              <div class="row">
                                                                  <div class="col-md-2">
                                                                      ประเภทการลาออก
                                                                  </div>
                                                                  <div class="col-md-10">
                                                                      <input type="radio" name="prs_type" id="prs_type" value="RS" checked="checked"/> ลาออก
                                                                      <input type="radio" name="prs_type" id="prs_type" value="RT" /> เกษียณ
                                                                      <input type="radio" name="prs_type" id="prs_type" value="OT" /> อื่นๆ
                                                                  </div>
                                                              </div>
                                                            </div>
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <div class="col-md-2">
                                                                        เหตุผลการลาออก
                                                                    </div>
                                                                    <div class="col-md-4">
                                                                        @Html.TextArea("prs_detail","",new { @class="form-control"})
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <div class="col-md-2">
                                                                        วันที่ลาออก
                                                                    </div>
                                                                    <div class="col-md-4">
                                                                        @Html.TextBox("prs_date_resign", "", new { @class = "form-control datepicker" })
                                                                        @Html.ValidationMessage("prs_date_resign", "กรุณาระบุวันที่ลาออกจากตำแหน่ง", new { @class = "text-danger " })
                                                                        
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <div class="col-md-12">
                                                                        @Html.TextBox("prs_ref_emp_position_id","",new { @class="form-control", @type="hidden"})
                                                                        @Html.TextBox("emp_id",ViewData["emp_id"], new { @class="form-control" , @type="hidden"})
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="modal-footer">
                                                           <button class="modal-close btn btn-default">ยกเลิก</button>
                                                            <button class="btn btn-primary" type="submit"><span><i class="fa fa-save"></i></span> บันทึก</button>
                                                        </div>
                                                        @{ Html.EndForm();}
                                                    </div>
                                                </div>
                                            </div>

                                                            <!--end modal resign position--->
                                                            <!---Modal กองทุน-->
                                                            <div class="modal fade" id="myModalPosition" role="dialog">
                                                                <div class="modal-dialog">

                                                                    <!-- Modal content-->
                                                                    <div class="modal-content">
                                                                        @{ Html.BeginForm("editPosition", "Position", FormMethod.Post);}
                                                                        <div class="modal-header">
                                                                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                                                                            <h4 class="modal-title">แก้ไข ตำแหน่งพนักงาน</h4>
                                                                        </div>
                                                                        <div class="modal-body">
                                                                            <div class="form-group">
                                                                                <div class="row">
                                                                                    <div class="col-sm-2">
                                                                                        ตำแหน่ง
                                                                                    </div>
                                                                                    <div class="col-sm-4">
                                                                                        @Html.DropDownList("position_edit", ViewData["position_dropdown"] as List<SelectListItem>, new { @class = "form-control select2", @style = "width:100%" })
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div class="form-group">
                                                                                <div class="row">
                                                                                    <div class="col-sm-2">
                                                                                        บริษัท
                                                                                    </div>
                                                                                    <div class="col-sm-4">
                                                                                        <div class="dropCompEdit"> @Html.DropDownList("company_edit", ViewData["company"] as List<SelectListItem>, new { @class = "form-control select2", @style = "width:100%", @onchange = "myFunctionCompanyEdit()" })</div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div class="form-group">
                                                                                <div class="row">
                                                                                    <div class="col-sm-2">
                                                                                        ฝ่าย
                                                                                    </div>
                                                                                    <div class="col-sm-4">
                                                                                        <div class="dropSectEdit">
                                                                                            @Html.DropDownList("section_edit", ViewData["section"] as List<SelectListItem>, new { @class = "form-control select2", @style = "width:100%", @onchange = "myFunctionSectionEdit()" })

                                                                                        </div>
                                                                                        @Html.TextBox("txtsection", "", new { @class = "form-control", @type = "hidden" })
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div class="form-group">
                                                                                <div class="row">
                                                                                    <div class="col-sm-2">
                                                                                        แผนก
                                                                                    </div>
                                                                                    <div class="col-sm-4">
                                                                                        <div class="dropDeptEdit">
                                                                                            @Html.DropDownList("deptEdit", ViewData["department"] as List<SelectListItem>, new { @class = "form-control select2 deptEdit", @style = "width:100%" })

                                                                                        </div>
                                                                                        @Html.TextBox("txtdepartment_edit", "", new { @class = "form-control", @type = "hidden" })
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div class="form-group">
                                                                                <div class="row">
                                                                                    <div class="col-sm-2">
                                                                                        ประเภทพนักงาน
                                                                                    </div>
                                                                                    <div class="col-sm-4">
                                                                                        @Html.DropDownList("type_edit", ViewData["type_emp"] as List<SelectListItem>, new { @class = "form-control", @style = "width:100%" })
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div class="form-group">
                                                                                <div class="row">
                                                                                    <div class="col-sm-2">
                                                                                        วันที่เริ่มงาน
                                                                                    </div>
                                                                                    <div class="col-sm-4">
                                                                                        @Html.TextBox("start_edit", "", new { @class = "form-control datepicker" })
                                                                                        @Html.TextBox("emp_id", ViewData["emp_id"], new { @class = "form-control datepicker", @type = "hidden" })
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div class="form-group">
                                                                                <div class="row">
                                                                                    <div class="col-sm-2">
                                                                                        วันที่ลาออก
                                                                                    </div>
                                                                                    <div class="col-sm-4">
                                                                                        @Html.TextBox("end_edit", "", new { @class = "form-control datepicker" })
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            @Html.TextBox("position_id", "", new { @class = "form-control", @type = "hidden" })
                                                                        </div>
                                                                        <div class="modal-footer">
                                                                            <input type="submit" class="btn btn-primary" value="แก้ไขข้อมูล" />
                                                                            <button type="button" class="btn btn-default" data-dismiss="modal">ยกเลิก</button>
                                                                        </div>
                                                                        @{ Html.EndForm();}
                                                                    </div>

                                                                </div>
                                                            </div>
                                                            <!---End Fund-->
                                                            <!--Modal position change-->
                                                            <div class="modal fade" id="myModalPositionChange" role="dialog">
                                                                <div class="modal-dialog">
                                                                    <!-- Modal content-->
                                                                    <div class="modal-content">
                                                                        @{ Html.BeginForm("insert_position_change", "empPositionChange", FormMethod.Post);}
                                                                        <div class="modal-header">
                                                                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                                                                            <h4 class="modal-title">เปลี่ยน ตำแหน่งพนักงาน</h4>
                                                                        </div>
                                                                        <div class="modal-body">
                                                                            <div class="form-group">
                                                                                <div class="row">
                                                                                    <div class="col-sm-2">
                                                                                        ตำแหน่ง
                                                                                    </div>
                                                                                    <div class="col-sm-10">
                                                                                        @Html.DropDownList("position_ch", ViewData["position_dropdown"] as List<SelectListItem>, new { @class = "form-control select2", @style = "width:100%" })
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div class="form-group">
                                                                                <div class="row">
                                                                                    <div class="col-sm-2">
                                                                                        บริษัท
                                                                                    </div>
                                                                                    <div class="col-sm-10">
                                                                                        <div class="compChange"> @Html.DropDownList("company_ch", ViewData["company"] as List<SelectListItem>, new { @class = "form-control select2", @style = "width:100%", @onchange = "myFunctionCompanyChange()" })</div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div class="form-group">
                                                                                <div class="row">
                                                                                    <div class="col-sm-2">
                                                                                        ฝ่าย
                                                                                    </div>
                                                                                    <div class="col-sm-10">
                                                                                        <div class="sectChange">
                                                                                            @Html.DropDownList("section_ch", ViewData["section"] as List<SelectListItem>, new { @class = "form-control select2", @style = "width:100%", @onchange = "myFunctionSectionChange()" })

                                                                                        </div>
                                                                                        @Html.TextBox("txtsection", "", new { @class = "form-control", @type = "hidden" })
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div class="form-group">
                                                                                <div class="row">
                                                                                    <div class="col-sm-2">
                                                                                        แผนก
                                                                                    </div>
                                                                                    <div class="col-sm-10">
                                                                                        <div class="deptChange">
                                                                                            @Html.DropDownList("dept_ch", ViewData["department"] as List<SelectListItem>, new { @class = "form-control select2 deptEdit", @style = "width:100%" })

                                                                                        </div>
                                                                                        @Html.TextBox("txtdepartment_edit", "", new { @class = "form-control", @type = "hidden" })
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div class="form-group">
                                                                                <div class="row">
                                                                                    <div class="col-sm-2">
                                                                                        ประเภทพนักงาน
                                                                                    </div>
                                                                                    <div class="col-sm-10">
                                                                                        @Html.DropDownList("type_ch", ViewData["type_emp"] as List<SelectListItem>, new { @class = "form-control", @style = "width:100%" })
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div class="form-group">
                                                                                <div class="row">
                                                                                    <div class="col-sm-2">
                                                                                        วันที่เริ่มงาน
                                                                                    </div>
                                                                                    <div class="col-sm-10">
                                                                                        @Html.TextBox("start_ch", "", new { @class = "form-control datepicker" })
                                                                                        @Html.TextBox("emp_id", ViewData["emp_id"], new { @class = "form-control", @type = "hidden" })
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            @*<div class="form-group">
                                                <div class="row">
                                                    <div class="col-sm-2">
                                                        วันที่ลาออก
                                                    </div>
                                                    <div class="col-sm-4">
                                                        @Html.TextBox("end_edit", "", new { @class = "form-control datepicker" })
                                                    </div>
                                                </div>
                                            </div>*@
                                                                            @Html.TextBox("position_id_ch", "", new { @class = "form-control", @type = "hidden" })
                                                                        </div>
                                                                        <div class="modal-footer">
                                                                            <input type="submit" class="btn btn-primary" value="บันทึก" />
                                                                            <button type="button" class="btn btn-default" data-dismiss="modal">ยกเลิก</button>
                                                                        </div>
                                                                        @{ Html.EndForm();}
                                                                    </div>

                                                                </div>
                                                            </div>
                                                            <!---End Modal position change-->
                                                            <!--Modal position change-->
                                                            <div class="modal fade" id="myModalPositionChangeList" role="dialog">
                                                                <div class="modal-dialog modal-lg" style="width:90%">
                                                                    <!-- Modal content-->
                                                                    <div class="modal-content">
                                                                        <div class="modal-header">
                                                                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                                                                            <h4 class="modal-title">ประวัติการเปลี่ยน/ย้ายตำแหน่งของพนักงาน</h4>
                                                                        </div>
                                                                        <div class="modal-body">
                                                                            <div class="table-responsive">
                                                                                <table class="table table-bordered dataTable table-responsive pre-scrollable" style="font-size: 12px;">
                                                                                    <thead class="text-center">
                                                                                        <tr>

                                                                                            <th rowspan="2"  class="text-center">ลำดับ</th>
                                                                                            <th colspan="5"  class="text-center">ตำแหน่งใหม่ หลังจากเปลี่ยนแปลง</th>
                                                                                            <th colspan="5"  class="text-center">ตำแหน่ง ก่อนเปลี่ยนแปลง</th>
                                                                                            @*<th rowspan="2" style="border-left-width: 1px;">จัดการ</th>*@
                                                                                        </tr>
                                                                                        <tr>
                                                                                            <th  class="text-center">ตำแหน่ง</th>
                                                                                            <th  class="text-center">บริษัท  </th>
                                                                                            <th  class="text-center">ฝ่าย</th>
                                                                                            <th  class="text-center">แผนก</th>
                                                                                            <th  class="text-center">วันที่เริ่ม</th>
                                                                                            <th  class="text-center">ตำแหน่ง</th>
                                                                                            <th  class="text-center">บริษัท  </th>
                                                                                            <th  class="text-center">ฝ่าย</th>
                                                                                            <th  class="text-center">แผนก</th>
                                                                                            <th  class="text-center">วันที่เริ่ม</th>

                                                                                        </tr>
                                                                                    </thead>
                                                                                    <tbody>
                                                                                        @{ int num = 1;}
                                                                                        @foreach (var obj in ViewData["data_change_position"] as List<empPositionChangeModel>)
                                                                                        {
                                                                                            <tr>
                                                                                                <td>@num</td>
                                                                                                <td>@obj.pc_position_id</td>
                                                                                                <td>@obj.pc_comp_id</td>
                                                                                                <td>@obj.pc_sect_id</td>
                                                                                                <td>@obj.pc_dept_id</td>
                                                                                                <td>@obj.pc_start_date</td>
                                                                                                <td>@obj.pc_position_id_old</td>
                                                                                                <td>@obj.pc_company_old</td>
                                                                                                <td>@obj.pc_section_old</td>
                                                                                                <td>@obj.pc_dept_old</td>
                                                                                                <td>@obj.pc_start_old</td>
                                                                                                @*<td>
                                                                    <a class="btn btn-danger del_ut" ref="@obj.pc_id"><i class="fa fa-trash"></i> ลบ</a>
                                                                </td>*@
                                                                                            </tr>
                                                                                            num++;
                                                                                        }
                                                                                    </tbody>
                                                                                </table>
                                                                            </div>
                                                                        </div>
                                                                        <div class="modal-footer">
                                                                            <button type="button" class="btn btn-default" data-dismiss="modal">ปิดหน้าต่าง</button>
                                                                        </div>
                                                                    </div>

                                                                </div>
                                                            </div>
                                                            <!---End Modal position change-->
                                            <!--Modal position resign-->
                                            <div class="modal fade" id="myModalPositionResignList" role="dialog">
                                                <div class="modal-dialog modal-lg" style="width:90%">
                                                    <!-- Modal content-->
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                                                            <h4 class="modal-title">ประวัติการลาออกจากตำแหน่งของพนักงาน</h4>
                                                        </div>
                                                        <div class="modal-body">
                                                            <div class="table-responsive">
                                                                <table class="table table-bordered dataTable table-responsive pre-scrollable" style="font-size: 12px;">
                                                                    <thead class="text-center">
                                                                    
                                                                        <tr>
                                                                            <th>ลำดับ</th>
                                                                            <th>ตำแหน่ง</th>
                                                                            <th>บริษัท  </th>
                                                                            <th>ฝ่าย</th>
                                                                            <th>แผนก</th>
                                                                            <th>ประเภท</th>
                                                                            <th>วันที่เริ่ม</th>
                                                                            <th>วันที่ลาออก</th>
                                                                            <th>ประเภทการลาออก</th>
                                                                            <th>เหตุผลการลาออก</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                        @{ int k = 1;}
                                                                        @foreach (var obj in ViewData["data_resign_position"] as List<EmpPositionResignModel>)
                                                                        {
                                                                            <tr>
                                                                                <td>@k</td>
                                                                                <td>@obj.position_name</td>
                                                                                <td>@obj.comp_name</td>
                                                                                <td>@obj.section_name</td>
                                                                                <td>@obj.dept_name</td>
                                                                                <td>@obj.type_name</td>
                                                                                <td>@obj.prs_start_date</td>
                                                                                <td>@obj.prs_resign_date</td>
                                                                                @if (obj.prs_resign_type == "RS")
                                                                                {
                                                                                    <td>ลาออก</td>
                                                                                }
                                                                                else if (obj.prs_resign_type == "RT")
                                                                                {
                                                                                    <td>เกษียณ</td>
                                                                                }
                                                                                else
                                                                                {
                                                                                    <td>อื่นๆ</td>
                                                                                }
                                                                               
                                                                                <td>@obj.prs_resign_detail</td>
                                                                            </tr>
                                                                            k++;
                                                                        }
                                                                    </tbody>
                                                                </table>
                                                            </div>
                                                        </div>
                                                        <div class="modal-footer">
                                                            <button type="button" class="btn btn-default" data-dismiss="modal">ปิดหน้าต่าง</button>
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>
                                            <!---End Modal position resign-->
                                                            <!-- /.panel-body -->
                                                        </div>

                                                        @*</div>
                        </div>*@
                                                        @*</div>*@

                                                        <div class="form-group">
                                                            <h5 style="color:gray;font-weight:bold">ข้อมูลการทำงาน <a title="แก้ไขข้อมูลตำแหน่งงาน"><i class="fa fa-edit"></i></a></h5>
                                                            <hr />
                                                            <div class="row">
                                                                <div class="col-sm-12">
                                                                    <div class="calendar_null"><a class="profile"><span class="btn btn-default" style="border-style:dotted; border-width:2px;background-color:white;border-color:dodgerblue"><i class="fa fa-plus" style="color:dodgerblue"></i></span>  เพิ่มข้อมูลการทำงาน</a></div>
                                                                </div>
                                                            </div>
                                                        </div>

                                                    </div>

                                                    <div class="tab-pane fade" id="home">
                                                        <h5 style="color:gray;font-weight:bold">ข้อมูลส่วนตัว <span><a title="แก้ไขข้อมูลส่วนตัว" class="edit_profile" data-target="#myModalProfile" data-toggle="modal"><i class="fa fa-edit"></i> </a></span></h5>
                                                        <hr />
                                                        <div class="row">
                                                            <div class="col-lg-12">
                                                                <div class="panel panel-default">
                                                                    <div class="panel-heading">
                                                                        <i class="fa fa-user fa-fw"></i> ข้อมูลส่วนตัว
                                                                    </div>
                                                                    <!-- /.panel-heading -->
                                                                    <div class="panel-body">
                                                                        <ul class="timeline" style="left: -45%;">
                                                                            <li class="timeline-inverted">
                                                                                <div class="timeline-badge success" style="left: 48%;">
                                                                                    <i class="fa fa-user"></i>
                                                                                </div>
                                                                                <div class="timeline-panel">
                                                                                    <div class="timeline-heading">
                                                                                        <h5 class="timeline-title">เพศ : @*@ViewData["gender"]*@</h5>
                                                                                    </div>
                                                                                    <div class="timeline-body">
                                                                                        <p>อายุ : @ViewData["age"] </p>
                                                                                        <p>กรุ๊บเลือด : @ViewData["blood"]</p>
                                                                                        <p>สัญชาติ : @ViewData["nationality"]</p>
                                                                                        <p>เชื้อชาติ : @ViewData["race"]</p>
                                                                                        <p>ศาสนา : @ViewData["religion"]</p>
                                                                                    </div>
                                                                                </div>
                                                                            </li>
                                                                            <li class="timeline-inverted">
                                                                                <div class="timeline-badge success" style="left: 48%;">
                                                                                    <i class="fa fa-user"></i>
                                                                                </div>
                                                                                <div class="timeline-panel">
                                                                                    <div class="timeline-heading">
                                                                                        <h5 class="timeline-title">วันเดือนปีเกิด : @ViewData["birthday"]</h5>
                                                                                    </div>
                                                                                    <div class="timeline-body">
                                                                                        <p>เลขประจำตัวประชาชน : @ViewData["identification"]</p>
                                                                                        <p>วันที่ออกบัตร : @ViewData["date_issue"]</p>
                                                                                        <p>วันหมดอายุ : @ViewData["expired_date"]</p>
                                                                                        <p>สถานภาพการสมรส : @ViewData["marital"]</p>
                                                                                    </div>
                                                                                </div>
                                                                            </li>
                                                                        </ul>
                                                                    </div>
                                                                    <!-- /.panel-body -->
                                                                    <!---modal edit profile-->
                                                                    <div class="modal fade" id="myModalProfile" role="dialog">
                                                                        <div class="modal-dialog modal-lg">

                                                                            <!-- Modal content-->

                                                                            <div class="modal-content">
                                                                                <div class="modal-header">
                                                                                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                                                                                    <h4 class="modal-title">แก้ไข ข้อมูลส่วนตัว</h4>
                                                                                </div>
                                                                                <div class="modal-body">
                                                                                    @*@Html.Partial("~/Views/Employee/edit_profile.cshtml")*@

                                                                                </div>
                                                                                <div class="modal-footer">
                                                                                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                                                                </div>
                                                                            </div>

                                                                        </div>
                                                                    </div>
                                                                    <!--end edit profile-->
                                                                </div>

                                                            </div>
                                                        </div>
                                                        <br />
                                                        <div class="clearfix"></div>
                                                        <h5 style="color:gray;font-weight:bold">ที่อยู่ <span class="edit_address" data-target="#myModalAddress" data-toggle="modal"><a><i class="fa fa-edit"></i></a></span></h5>
                                                        <hr />
                                                        <div class="row">
                                                            <div class="col-lg-12">
                                                                <div class="panel panel-default">
                                                                    <div class="panel-heading">
                                                                        <i class="fa fa-home fa-fw"></i> ที่อยู่
                                                                    </div>
                                                                    <!-- /.panel-heading -->
                                                                    <div class="panel-body">
                                                                        <ul class="timeline" style="left: -45%;">
                                                                            <li class="timeline-inverted">
                                                                                <div class="timeline-badge warning" style="left: 48%;">
                                                                                    <i class="fa fa-user"></i>
                                                                                </div>
                                                                                <div class="timeline-panel">
                                                                                    <div class="timeline-heading">
                                                                                        <h5 class="timeline-title">ที่อยู่ตามทะเบียนบ้าน</h5>
                                                                                    </div>
                                                                                    <div class="timeline-body">
                                                                                        <p>เลขที่  : @ViewData["num"]  หมู่ : @ViewData["moo"] </p>
                                                                                        <p>ชื่อ : @ViewData["name"]  ประเภทที่พัก : @ViewData["type"]</p>
                                                                                        <p>ซอย : @ViewData["alley"]  ถนน : @ViewData["road"]</p>
                                                                                        <p>ตำบล/แขวง : @ViewData["district_name"] อำเภอ/เขต : @ViewData["amphur_name"] </p>
                                                                                        <p>จังหวัด : @ViewData["province_name"]  @ViewData["postcode"] </p>
                                                                                    </div>
                                                                                </div>
                                                                            </li>
                                                                            <li class="timeline-inverted">
                                                                                <div class="timeline-badge warning" style="left: 48%;">
                                                                                    <i class="fa fa-user"></i>
                                                                                </div>
                                                                                <div class="timeline-panel">
                                                                                    <div class="timeline-heading">
                                                                                        <h5 class="timeline-title">ที่อยู่ที่ติดต่อได้</h5>
                                                                                    </div>
                                                                                    <div class="timeline-body">
                                                                                        <p>เลขที่  : @ViewData["num_call"]  หมู่ : @ViewData["moo_call"] </p>
                                                                                        <p>ชื่อ : @ViewData["name_call"]  ประเภทที่พัก : @ViewData["type_call"]</p>
                                                                                        <p>ซอย : @ViewData["alley_call"]  ถนน : @ViewData["road_call"]</p>
                                                                                        <p>ตำบล/แขวง : @ViewData["district_name_call"] อำเภอ/เขต : @ViewData["amphur_name_call"] </p>
                                                                                        <p>จังหวัด : @ViewData["province_name_call"]  @ViewData["postcode_call"] </p>
                                                                                    </div>
                                                                                </div>
                                                                            </li>
                                                                        </ul>
                                                                    </div>
                                                                    <!-- /.panel-body -->
                                                                </div>
                                                            </div>
                                                            <!---modal edit address-->
                                                            <div class="modal fade" id="myModalAddress" role="dialog">
                                                                <div class="modal-dialog modal-lg">

                                                                    <!-- Modal content-->

                                                                    <div class="modal-content">
                                                                        <div class="modal-header">
                                                                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                                                                            <h4 class="modal-title">แก้ไข ที่อยู่</h4>
                                                                        </div>
                                                                        <div class="modal-body">
                                                                            @Html.Partial("~/Views/Employee/edit_address.cshtml")

                                                                        </div>
                                                                        <div class="modal-footer">
                                                                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                                                        </div>
                                                                    </div>

                                                                </div>
                                                            </div>
                                                            <!--end edit address-->
                                                        </div>

                                                        @*</div>*@

                                                        <br />
                                                        <div class="clearfix"></div>
                                                        <h5 style="color:gray;font-weight:bold">การศึกษา</h5>
                                                        <hr />
                                                        <div class="row">
                                                            <div class="col-lg-12">

                                                                <div class="panel panel-default">
                                                                    <div class="panel-heading">
                                                                        <i class="fa fa-graduation-cap fa-fw"></i> ประวัติการศึกษา
                                                                    </div>
                                                                    <!-- /.panel-heading -->
                                                                    <div class="panel-body">
                                                                        <ul class="timeline" style="left: -45%;">
                                                                            @foreach (var item_study in ViewData["data_study"] as List<personal_studyModel>)
                                                                            {
                                                                                <li class="timeline-inverted">
                                                                                    <div class="timeline-badge success" style="left: 48%;">
                                                                                        <i class="fa fa-graduation-cap"></i>
                                                                                    </div>
                                                                                    <div class="timeline-panel">
                                                                                        <div class="timeline-heading">
                                                                                            <h5 class="timeline-title">ปีการศึกษา : @item_study.study_year</h5>
                                                                                        </div>
                                                                                        <div class="timeline-body">
                                                                                            <p>เกรดเฉลี่ย : @item_study.study_gpa</p>
                                                                                            <p>วุฒิการศึกษา : @item_study.study_degree</p>
                                                                                            <p>สาขา/คณะ : @item_study.study_branch</p>
                                                                                            <p>สถานศึกษา : @item_study.study_academy</p>
                                                                                            <p></p>
                                                                                        </div>
                                                                                    </div>
                                                                                </li>

                                                                            }
                                                                        </ul>
                                                                    </div>
                                                                    <!-- /.panel-body -->
                                                                </div>

                                                            </div>
                                                        </div>
                                                        <br />
                                                        <div class="clearfix"></div>
                                                        <h5 style="color:gray;font-weight:bold">การทำงาน</h5>
                                                        <hr />
                                                        <div class="row">
                                                            <div class="col-lg-12">

                                                                <div class="panel panel-default">
                                                                    <div class="panel-heading">
                                                                        <i class="fa fa-star fa-fw"></i> ประวัติการทำงาน
                                                                    </div>
                                                                    <!-- /.panel-heading -->
                                                                    <div class="panel-body">
                                                                        <ul class="timeline" style="left: -45%;">
                                                                            @foreach (var item_work in ViewData["data_work"] as List<personal_workModel>)
                                                                            {
                                                                                <li class="timeline-inverted">
                                                                                    <div class="timeline-badge warning" style="left: 48%;">
                                                                                        <i class="fa fa-star"></i>
                                                                                    </div>
                                                                                    <div class="timeline-panel">
                                                                                        <div class="timeline-heading">
                                                                                            <h5 class="timeline-title">ตำแหน่ง : @item_work.work_position</h5>
                                                                                        </div>
                                                                                        <div class="timeline-body">
                                                                                            <p>เริ่มทำงาน : @item_work.work_start</p>
                                                                                            <p>ลาออก : @item_work.work_end</p>
                                                                                            <p>บริษัท : @item_work.work_company</p>
                                                                                            <p>ที่อยู่บริษัท : @item_work.work_address</p>
                                                                                            <p></p>
                                                                                        </div>
                                                                                    </div>
                                                                                </li>

                                                                            }
                                                                        </ul>
                                                                    </div>
                                                                    <!-- /.panel-body -->
                                                                </div>

                                                            </div>
                                                        </div>

                                                        <br />
                                                        <div class="clearfix"></div>
                                                        <h5 style="color:gray;font-weight:bold">การฝึกอบรม</h5>
                                                        <hr />
                                                        <div class="row">
                                                            <div class="col-sm-12">
                                                                <div class="panel panel-default">
                                                                    <div class="panel-heading">
                                                                        <i class="glyphicon glyphicon-book fa-fw"></i> ประวัติการฝึกอบรม
                                                                    </div>
                                                                    <!-- /.panel-heading -->
                                                                    <div class="panel-body">
                                                                        <ul class="timeline" style="left: -45%;">
                                                                            @foreach (var item_train in ViewData["data_train"] as List<personal_trainModel>)
                                                                            {
                                                                                <li class="timeline-inverted">
                                                                                    <div class="timeline-badge success" style="left: 48%;">
                                                                                        <i class="glyphicon glyphicon-book"></i>
                                                                                    </div>
                                                                                    <div class="timeline-panel">
                                                                                        <div class="timeline-heading">
                                                                                            <h5 class="timeline-title">อบรมเรื่อง : @item_train.train_title</h5>
                                                                                        </div>
                                                                                        <div class="timeline-body">
                                                                                            <p>สถานที่ : @item_train.train_location</p>
                                                                                            <p>วันที่เริ่มอบรม : @item_train.train_start</p>
                                                                                            <p>วันที่สิ้นสุดการอบรม : @item_train.train_end</p>
                                                                                            <p></p>
                                                                                        </div>
                                                                                    </div>
                                                                                </li>

                                                                            }
                                                                        </ul>
                                                                    </div>
                                                                    <!-- /.panel-body -->
                                                                </div>

                                                            </div>
                                                        </div>
                                                        <br />
                                                        <div class="clearfix"></div>
                                                        <h5 style="color:gray;font-weight:bold">สถานะทางครอบครัวและบุคคลอ้างอิง</h5>
                                                        <hr />
                                                        <div class="row">
                                                            <div class="col-sm-12">
                                                                <div class="panel panel-default">
                                                                    <div class="panel-heading">
                                                                        <i class="glyphicon glyphicon-user fa-fw"></i> สถานะทางครอบครัวและบุคคลอ้างอิง
                                                                    </div>
                                                                    <!-- /.panel-heading -->
                                                                    <div class="panel-body">
                                                                        <ul class="timeline" style="left: -45%;">

                                                                            <li class="timeline-inverted">
                                                                                <div class="timeline-badge warning" style="left: 48%;">
                                                                                    <i class="glyphicon glyphicon-user"></i>
                                                                                </div>
                                                                                <div class="timeline-panel">
                                                                                    <div class="timeline-heading">
                                                                                        <h5 class="timeline-title">สถานะ : พ่อ</h5>
                                                                                    </div>
                                                                                    <div class="timeline-body">
                                                                                        <p>ชื่อ-นามสกุล : @ViewData["dad_name"]</p>
                                                                                        <p>อายุ : @ViewData["dad_age"]</p>
                                                                                        <p>โทรศัพท์ : @ViewData["dad_tel"]</p>
                                                                                        <p>มือถือ : @ViewData["dad_mobile"]</p>
                                                                                        <p>ที่อยู่ : @ViewData["dad_address"]</p>
                                                                                        <p></p>
                                                                                    </div>
                                                                                </div>
                                                                            </li>
                                                                            <li class="timeline-inverted">
                                                                                <div class="timeline-badge warning" style="left: 48%;">
                                                                                    <i class="glyphicon glyphicon-user"></i>
                                                                                </div>
                                                                                <div class="timeline-panel">
                                                                                    <div class="timeline-heading">
                                                                                        <h5 class="timeline-title">สถานะ : แม่</h5>
                                                                                    </div>
                                                                                    <div class="timeline-body">
                                                                                        <p>ชื่อ-นามสกุล : @ViewData["mom_name"]</p>
                                                                                        <p>อายุ : @ViewData["mom_age"]</p>
                                                                                        <p>โทรศัพท์ : @ViewData["mom_tel"]</p>
                                                                                        <p>มือถือ : @ViewData["mom_mobile"]</p>
                                                                                        <p>ที่อยู่ : @ViewData["mom_address"]</p>
                                                                                    </div>
                                                                                </div>
                                                                            </li>
                                                                            <li class="timeline-inverted">
                                                                                <div class="timeline-badge warning" style="left: 48%;">
                                                                                    <i class="glyphicon glyphicon-user"></i>
                                                                                </div>
                                                                                <div class="timeline-panel">
                                                                                    <div class="timeline-heading">
                                                                                        <h5 class="timeline-title">สถานะ : คู่สมรส</h5>
                                                                                    </div>
                                                                                    <div class="timeline-body">
                                                                                        <p>ชื่อ-นามสกุล : @ViewData["marry_name"]</p>
                                                                                        <p>อายุ : @ViewData["marry_age"]</p>
                                                                                        <p>โทรศัพท์ : @ViewData["marry_tel"]</p>
                                                                                        <p>มือถือ : @ViewData["marry_mobile"]</p>
                                                                                        <p>ที่อยู่ : @ViewData["marry_address"]</p>
                                                                                    </div>
                                                                                </div>
                                                                            </li>

                                                                        </ul>
                                                                    </div>
                                                                    <!-- /.panel-body -->
                                                                </div>

                                                            </div>
                                                        </div>
                                                        <br />
                                                        <div class="clearfix"></div>
                                                        <h5 style="color:gray;font-weight:bold">ข้อมูลบุตร</h5>
                                                        <hr />
                                                        <div class="row">
                                                            <div class="col-sm-12">

                                                                <div class="panel panel-default">
                                                                    <div class="panel-heading">
                                                                        <i class="fa fa-child fa-fw"></i> ข้อมูลบุตร
                                                                    </div>
                                                                    <!-- /.panel-heading -->
                                                                    <div class="panel-body">
                                                                        <ul class="timeline" style="left: -45%;">
                                                                            @foreach (var item_child in ViewData["data_child"] as List<personal_kidModel>)
                                                                            {
                                                                                <li class="timeline-inverted">
                                                                                    <div class="timeline-badge success" style="left: 48%;">
                                                                                        <i class="fa fa-child"></i>
                                                                                    </div>
                                                                                    <div class="timeline-panel">
                                                                                        <div class="timeline-heading">
                                                                                            <h5 class="timeline-title">ชื่อ-นามสกุล : @item_child.kid_name  @item_child.kid_lastname</h5>
                                                                                        </div>
                                                                                        <div class="timeline-body">
                                                                                            <p>อายุ : @item_child.kid_age</p>
                                                                                            <p>สถานะการศึกษา : @item_child.kid_study_status</p>
                                                                                            <p>ระดับการศึกษา : @item_child.kid_study_level</p>
                                                                                            <p>สถานศึกษา : @item_child.kid_study_school</p>
                                                                                            <p></p>
                                                                                        </div>
                                                                                    </div>
                                                                                </li>

                                                                            }
                                                                        </ul>
                                                                    </div>
                                                                    <!-- /.panel-body -->
                                                                </div>


                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="tab-pane fade" id="profile">
                                                        <div class="form-group">
                                                            <h5 style="color:gray;font-weight:bold">รายได้</h5>
                                                            <hr />
                                                            <div class="row">
                                                                <div class="col-sm-12">
                                                                    <div class="money_null">
                                                                        <a><span class="btn btn-default" style="border-style:dotted; border-width:2px;background-color:white;border-color:dodgerblue"><i class="fa fa-plus" style="color:dodgerblue"></i></span>  เพิ่มรายได้</a>
                                                                    </div>
                                                                    @{ Html.BeginForm("InsertPay", "Pay", FormMethod.Post);}
                                                                    <div class="form_money" style="border:1px dotted #2196f3;">
                                                                        <br />
                                                                        <div class="form-group">
                                                                            <div class="row">
                                                                                <div class="col-sm-3 text-right">
                                                                                    เริ่มใช้ข้อมูล ตั้งแต่
                                                                                </div>
                                                                                <div class="col-sm-4 text-right">
                                                                                    @Html.TextBox("money_start", "", new { @class = "form-control datepicker" })
                                                                                </div>
                                                                                <div class="col-sm-1 text-center">
                                                                                    ถึง
                                                                                </div>
                                                                                <div class="col-sm-4 text-right">
                                                                                    @Html.TextBox("money_end", "01/01/3543", new { @class = "form-control" ,@disabled="disabled"})
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <hr />
                                                                        <div class="form-group">
                                                                            <div class="row">
                                                                                <div class="col-sm-2">
                                                                                    เลือกรายการ
                                                                                </div>
                                                                                <div class="col-sm-3 money_list">
                                                                                    
                                                                                    @Html.DropDownList("money_list", ViewData["income"] as List<SelectListItem>, new { @class = "form-control" })
                                                                                </div>
                                                                                <div class="col-sm-2">
                                                                                    จำนวนเงิน(บาท)
                                                                                </div>
                                                                                <div class="col-sm-3">
                                                                                    @Html.TextBox("money", "0", new { @class = "form-control text-right", @placeholder = "ระบุจำนวนเงิน" })
                                                                                    @Html.TextBox("emp_id", ViewData["emp_id"], new { @class = "form-control", type = "hidden" })
                                                                                </div>
                                                                                <div class="col-sm-2">
                                                                                    <input type="button" id="btnMoney" class="btn btn-primary" value="ตกลง" style="width:100%" />
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="form-group">
                                                                            <div class="row">
                                                                                <div class="col-sm-12">
                                                                                    <table class="money table table-bordered table-responsive"></table>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="form-group">
                                                                            <div class="row">
                                                                                <div class="col-sm-9 text-right">
                                                                                    รวมเงิน
                                                                                </div>
                                                                                <div class="col-sm-3 text-right">
                                                                                    @Html.TextBox("totalMoney", "", new { @class = "form-control" })
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                     
                                                                        <div class="form-group">
                                                                            <div class="row">
                                                                                <div class="col-sm-12 text-center">
                                                                                    <input type="submit" value="บันทึกข้อมูล" class="btn btn-primary submitPay" />
                                                                                    <a class="btn btn-default cancel_money"> ยกเลิก</a>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    @{Html.EndForm();}
                                                                    <div class="data_money">
                                                                        <br />
                                                                        <div class="form-group">
                                                                            <div class="row">
                                                                                <div class="col-sm-12">
                                                                                    @*<table class="table table-responsive table-bordered">
                                                        <thead>
                                                            <tr>
                                                                <th>ลำดับ</th>
                                                                <th>รายได้</th>
                                                                <th>จำนวนเงิน</th>
                                                                <th>จัดการ</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            @{ int i = 1;}
                                                            @foreach (var item in ViewData["data_pay"] as List<emp_payModel>)
                                                            {
                                                                <tr>
                                                                    <td>@i</td>
                                                                    <td>@item.pay_income_name</td>
                                                                    <td>@item.pay_amount</td>
                                                                    <td>
                                                                        <a href="#" class="btn btn-warning edit_pay" ref="@item.pay_id" data-toggle="modal" data-target="#myModal"><i class="fa fa-edit"></i> แก้ไขข้อมูล</a>
                                                                        <a href="#" class="btn btn-danger delpay" ref="@item.pay_id"><i class="fa fa-trash"></i> ลบ</a>
                                                                    </td>
                                                                </tr>
                                                                i++;
                                                            }
                                                        </tbody>
                                                    </table>*@
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <!---collaps-->
                                                                    <div>
                                                                        <div class="form-group">
                                                                            <div class="row">
                                                                                <div class="col-lg-12">
                                                                                    <div class="panel panel-default">
                                                                                        <div class="panel-heading">
                                                                                            รายได้
                                                                                        </div>
                                                                                        <!-- .panel-heading -->
                                                                                        <div class="panel-body">
                                                                                            <div class="panel-group" id="accordion">
                                                                                                @{ int i = 0;}
                                                                                                @foreach (var item in ViewData["data_pay"] as List<emp_payModel>)
                                                                                                {
                                                                                                    <div class="panel panel-default">
                                                                                                        <div class="panel-heading">
                                                                                                            <div class="row">
                                                                                                                <div class="col-md-6">
                                                                                                                    <h5><a data-toggle="collapse" data-parent="#accordion" href="#collapse_@i" aria-expanded="false" class="collapsed valcap" ref="@item.start^@item.end">@item.pay_start_date - @item.pay_end_date</a></h5>
                                                                                                                </div>
                                                                                                                <div class="col-md-6 text-right">
                                                                                                                    <span><a class="btn btn-info btn-sm plusPay" ref="@item.start^@item.end"><i class="fa fa-plus"></i> เพิ่มข้อมูล</a></span> &nbsp;<span><a class="btn btn-danger btn-sm cancelPay" ref="@item.start^@item.end"><i class="fa fa-times"></i>  ยกเลิกชุดข้อมูลนี้</a></span>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                        </div>
                                                                                                        <div id="collapse_@i" class="panel-collapse collapse" aria-expanded="false" style="height: 0px;">
                                                                                                            <div class="panel-body">

                                                                                                            </div>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                    i++;
                                                                                                }

                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <!-- .panel-body -->
                                                                        </div>
                                                                        <!-- /.panel -->
                                                                    </div>
                                                                    <!---end collapse-->
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <!--Modal edit pay-->
                                                        <div class="modal fade" id="myModalPayEdit" role="dialog">
                                                            <div class="modal-dialog">

                                                                <!-- Modal content-->
                                                                <div class="modal-content">
                                                                    <div class="modal-header">
                                                                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                                                                        <h4 class="modal-title">แก้ไข รายได้</h4>
                                                                    </div>
                                                                    @{Html.BeginForm("editPay", "Pay", FormMethod.Post);}
                                                                    <div class="modal-body">
                                                                        <div class="form-group">
                                                                            <div class="row">
                                                                                <div class="col-sm-6 income_edit">
                                                                                    @Html.DropDownList("income_edit", ViewData["income"] as List<SelectListItem>, new { @class = "form-control" })
                                                                                </div>
                                                                                <div class="col-sm-6">
                                                                                    @Html.TextBox("amount_update", "", new { @class = "form-control" })
                                                                                    @Html.TextBox("pay_id", "", new { @class = "form-control", @type = "hidden" })
                                                                                    @Html.TextBox("emp_id", ViewData["emp_id"], new { @class = "form-control", @type = "hidden" })
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="modal-footer">
                                                                        <input type="submit" class="btn btn-primary" value="แก้ไขข้อมูล" />
                                                                        <button type="button" class="btn btn-default" data-dismiss="modal">ยกเลิก</button>
                                                                    </div>
                                                                    @{ Html.EndForm();}
                                                                </div>

                                                            </div>
                                                        </div>
                                                        <!--end modal-->
                                                        <div class="form-group">
                                                            <div class="row">
                                                                <h5 style="color:gray;font-weight:bold">รายการหัก</h5>
                                                                <hr />
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <div class="row">
                                                                <div class="col-sm-12">
                                                                    <div class="minus_null">
                                                                        <a><span class="btn btn-default" style="border-style:dotted; border-width:2px;background-color:white;border-color:dodgerblue"><i class="fa fa-plus" style="color:dodgerblue"></i></span>  เพิ่มรายการหัก</a>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        @{Html.BeginForm("insertMS", "Minus", FormMethod.Post);}
                                                        <div class="form_minus" style="border:1px dotted #2196f3;">
                                                            <br />
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <div class="col-sm-3 text-right">
                                                                        เริ่มใช้ข้อมูล ตั้งแต่
                                                                    </div>
                                                                    <div class="col-sm-4 text-right">
                                                                        @Html.TextBox("minus_start", "", new { @class = "form-control datepicker_minus_start" })
                                                                    </div>
                                                                    <div class="col-sm-1 text-center">
                                                                        ถึง
                                                                    </div>
                                                                    <div class="col-sm-4 text-right">
                                                                        @Html.TextBox("minus_end", "", new { @class = "form-control datepicker_minus_start" })
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <hr />
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <div class="col-sm-2">
                                                                        เลือกรายการ
                                                                    </div>
                                                                    <div class="col-sm-3 minus_list">
                                                                        @Html.DropDownList("minus_list", ViewData["minus"] as List<SelectListItem>, new { @class = "form-control" })
                                                                    </div>
                                                                    <div class="col-sm-2">
                                                                        จำนวนเงิน(บาท)
                                                                    </div>
                                                                    <div class="col-sm-3">
                                                                        @Html.TextBox("minus", "0", new { @class = "form-control text-right", @placeholder = "ระบุจำนวนเงิน" })
                                                                        @Html.TextBox("emp_id", ViewData["emp_id"], new { @class = "form-control", @type = "hidden" })
                                                                    </div>
                                                                    <div class="col-sm-2">
                                                                        <input type="button" id="btnMinus" class="btn btn-primary" value="ตกลง" style="width:100%" />
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <div class="col-sm-12">
                                                                        <table class="minus table table-bordered table-responsive"></table>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <div class="col-sm-9 text-right">
                                                                        รวมเงิน
                                                                    </div>
                                                                    <div class="col-sm-3 text-right">
                                                                        @Html.TextBox("totalMinus", "", new { @class = "form-control" })
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <div class="col-sm-12 text-center">
                                                                        <input type="submit" value="บันทึกข้อมูล" class="btn btn-primary submitMinus" />
                                                                        <a class="btn btn-default cancel_minus"> ยกเลิก</a>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        @{Html.EndForm();}
                                                        <div>
                                                            <br />
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <div class="col-lg-12">
                                                                        <div class="panel panel-default">
                                                                            <div class="panel-heading">
                                                                                รายการหัก
                                                                            </div>
                                                                            <!-- .panel-heading -->
                                                                            <div class="panel-body">
                                                                                <div class="panel-group" id="accordion">
                                                                                    @{ int j = 0;}
                                                                                    @foreach (var item_minus in ViewData["data_minus"] as List<emp_minusSalaryModel>)
                                                                                    {
                                                                                        <div class="panel panel-default">
                                                                                            <div class="panel-heading">
                                                                                                <div class="row">
                                                                                                    <div class="col-md-6">
                                                                                                        <h5><a data-toggle="collapse" data-parent="#accordion" href="#collapsej_@j" aria-expanded="false" class="collapsed valcapj" ref="@item_minus.start^@item_minus.end">@item_minus.ms_start_date - @item_minus.ms_end_date</a></h5>
                                                                                                    </div>
                                                                                                    <div class="col-md-6 text-right">
                                                                                                        <span><a class="btn btn-info btn-sm plusMinus" ref="@item_minus.start^@item_minus.end"><i class="fa fa-plus"></i> เพิ่มข้อมูล</a></span> &nbsp;<span><a class="btn btn-danger btn-sm cancelMinus" ref="@item_minus.start^@item_minus.end"><i class="fa fa-times"></i>  ยกเลิกชุดข้อมูลนี้</a></span>
                                                                                                    </div>
                                                                                                </div>
                                                                                                @*<h4 class="panel-title">
                                                                                                   
                                                                                                </h4>*@
                                                                                            </div>
                                                                                            <div id="collapsej_@j" class="panel-collapse collapse" aria-expanded="false" style="height: 0px;">
                                                                                                <div class="panel-body">

                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                        j++;
                                                                                    }
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="data_minus">
                                                            <br />
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <div class="col-sm-12">

                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <!--Modal edit pay-->
                                                        <div class="modal fade" id="myModalMinusEdit" role="dialog">
                                                            <div class="modal-dialog">

                                                                <!-- Modal content-->
                                                                <div class="modal-content">
                                                                    <div class="modal-header">
                                                                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                                                                        <h4 class="modal-title">แก้ไข รายการหัก</h4>
                                                                    </div>
                                                                    @{ Html.BeginForm("edit_minus", "Minus", FormMethod.Post);}
                                                                    <div class="modal-body">
                                                                        <div class="form-group">
                                                                            <div class="row">
                                                                                <div class="col-sm-6">
                                                                                    @Html.DropDownList("minus_edit", ViewData["minus"] as List<SelectListItem>, new { @class = "form-control" })
                                                                                </div>
                                                                                <div class="col-sm-6">
                                                                                    @Html.TextBox("amountMinus", "", new { @class = "form-control" })
                                                                                    @Html.TextBox("minusId", "", new { @class = "form-control", @type = "hidden" })
                                                                                    @Html.TextBox("emp_id", ViewData["emp_id"], new { @class = "form-control", @type = "hidden" })
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="modal-footer">
                                                                        <input type="submit" class="btn btn-primary" value="แก้ไขข้อมูล" />
                                                                        <button type="button" class="btn btn-default" data-dismiss="modal">ยกเลิก</button>
                                                                    </div>
                                                                    @{Html.EndForm();}
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <!--end modal-->
                                                    </div>
                                                    <div class="tab-pane fade" id="messages">

                                                        <h5 style="color:gray;font-weight:bold">กองทุนสำรองเลี้ยงชีพ</h5>
                                                        <hr />
                                                        <div class="form-group">
                                                            <div class="row">
                                                                <div class="col-sm-4">
                                                                    <div class="fund_null">
                                                                        <a><span class="btn btn-default" style="border-style:dotted; border-width:2px;background-color:white;border-color:dodgerblue"><i class="fa fa-plus" style="color:dodgerblue"></i></span>  เพิ่มกองทุนสำรองเลี้ยงชีพ</a>
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-8 text-left">
                                                                    <a data-toggle="modal" data-target="#myModalPositionChangeFund"><span><i class="fa fa-list"></i> ประวัติการเปลี่ยน/ย้ายกองทุน</span></a>
                                                                    <a data-toggle="modal" data-target="#myModalPositionResignFund"><span><i class="fa fa-list"></i> ประวัติการลาออกจากกองทุน</span></a>
                                                                </div>
                                                            </div>
                                                            <!---Modal Fund Resign-->
                                                            <div class="modal fade" id="myModalPositionResignFund" role="dialog">
                                                                <div class="modal-dialog modal-lg">

                                                                    <!-- Modal content-->
                                                                    <div class="modal-content">
                                                                
                                                                        <div class="modal-header">
                                                                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                                                                            <h4 class="modal-title">ประวัติการลาออกจากกองทุน</h4>
                                                                        </div>
                                                                        <div class="modal-body">
                                                                            <div class="form-group">
                                                                                <div class="row">
                                                                                   <div class="col-md-12">
                                                                                       <div class="table table-responsive">
                                                                                           <table class="table table-bordered table-responsive dataTable">
                                                                                               <thead>
                                                                                                   <tr>
                                                                                                       <th>ลำดับ</th>
                                                                                                       <th>เลขที่กองทุน</th>
                                                                                                       <th>ชื่อกองทุน</th>
                                                                                                       <th>วันที่เข้าร่วม</th>
                                                                                                       <th>วันที่ลาออก</th>
                                                                                                       <th>ประเภทการลาออก</th>
                                                                                                       <th>เหตุผลการลาออก</th>
                                                                                                       <th>อายุสมาชิก(วัน)</th>
                                                                                                   </tr>
                                                                                               </thead>
                                                                                               <tbody>
                                                                                                   @{int ii = 1;}
                                                                                                   @foreach (var fr in ViewData["fundResign"] as List<empFundResign>)
                                                                                                   {
                                                                                                   <tr>
                                                                                                       <td>@ii</td>
                                                                                                       <td>@fr.fund_code</td>
                                                                                                       <td>@fr.fund_name</td>
                                                                                                       <td>@fr.fnr_start_date</td>
                                                                                                       <td>@fr.fnr_resign_date</td>
                                                                                                       @if (fr.fnr_type_resign == "RS")
                                                                                                       {
                                                                                                        <td>ลาออก</td>

                                                                                                       }
                                                                                                       else if (fr.fnr_type_resign == "RT")
                                                                                                       {
                                                                                                        <td>เกษียณ</td>

                                                                                                       }
                                                                                                       else
                                                                                                       {
                                                                                                        <td>อื่นๆ</td>
                                                                                                       }
                                                                                                      
                                                                                                       <td>@fr.fnr_detail_resign</td>
                                                                                                       <td>@fr.age</td>
                                                                                                   </tr>
                                                                                                       ii++;
                                                                                                   }
                                                                                               </tbody>
                                                                                           </table>
                                                                                       </div>
                                                                                   </div>
                                                                                </div>
                                                                            </div>
                                                                         
                                                                        </div>
                                                                       
                                                                      
                                                                    </div>

                                                                </div>
                                                            </div>
                                                            <!---End Fund-->
                                                            <!---Modal Fund Resign-->
                                                            <div class="modal fade" id="myModalPositionChangeFund" role="dialog">
                                                                <div class="modal-dialog modal-lg">

                                                                    <!-- Modal content-->
                                                                    <div class="modal-content">

                                                                        <div class="modal-header">
                                                                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                                                                            <h4 class="modal-title">ประวัติการลาออกจากกองทุน</h4>
                                                                        </div>
                                                                        <div class="modal-body">
                                                                            <div class="form-group">
                                                                                <div class="row">
                                                                                    <div class="col-md-12">
                                                                                        <div class="table table-responsive">
                                                                                            <table class="table table-bordered table-responsive dataTable">
                                                                                                <thead>
                                                                                                    <tr>
                                                                                                        <th class="text-center" rowspan="2">ลำดับ</th>
                                                                                                        <th class="text-center"  colspan="4">ข้อมูลกองทุนเดิม</th>
                                                                                                        <th class="text-center" colspan="3">ข้อมูลกองทุนใหม่</th>
                                                                                                        <th class="text-center" rowspan="2" style="border-width:1px">ประเภทการโอนย้าย</th>
                                                                                                        <th class="text-center" rowspan="2">วันที่บันทึกข้อมูล</th>
                                                                                                    </tr>
                                                                                                    <tr>
                                                                                                        <th class="text-center">เลขที่กองทุน</th>
                                                                                                        <th class="text-center">ชื่อกองทุน</th>
                                                                                                        <th class="text-center">วันที่เข้าร่วม</th>
                                                                                                        <th class="text-center">อายุสมาชิก</th>
                                                                                                        <th class="text-center">เลขที่กองทุน</th>
                                                                                                        <th class="text-center">ชื่อกองทุน</th>
                                                                                                        <th class="text-center">วันที่เข้าร่วม</th>
                                                                                                   
                                                                                                    </tr>
                                                                                                </thead>
                                                                                                <tbody>
                                                                                                    @{int iii = 1;}
                                                                                                    @foreach (var cf in ViewData["fundChange"] as List<empFundChange>)
                                                                                                    {
                                                                                                        <tr>
                                                                                                            <td>@iii</td>
                                                                                                            <td>@cf.fund_code_old</td>
                                                                                                            <td>@cf.fund_name_old</td>
                                                                                                            <td>@cf.cf_fund_start_old</td>
                                                                                                            <td>@cf.cf_fund_age_old</td>
                                                                                                            <td>@cf.fund_code_new</td>
                                                                                                            <td>@cf.fund_name_new</td>
                                                                                                            <td>@cf.cf_fund_start_new</td>
                                                                                                            @if (cf.cf_change_type == "C")
                                                                                                            {
                                                                                                                <td class="text-center"><span class="btn btn-info"><i class="fa fa-home"></i>  ย้ายบริษัท</span></td>

                                                                                                            }
                                                                                                            else if (cf.cf_change_type == "F")
                                                                                                            {


                                                                                                                <td class="text-center"><span class="btn btn-success"><i class="fa fa-home"></i>  ย้ายกองทุน</span></td>
                                                                                                            }
                                                                                                            else
                                                                                                            {
                                                                                                                <td class="text-center"><span class="btn btn-warning"><i class="fa fa-home"></i>  ย้ายบริษัทและกองทุน</span></td>


                                                                                                            }

                                                                                                            <td>@cf.cf_submit_date</td>
                                                                                                        </tr>
                                                                                                        iii++;
                                                                                                    }
                                                                                                </tbody>
                                                                                            </table>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>

                                                                        </div>


                                                                    </div>

                                                                </div>
                                                            </div>
                                                            <!---End Fund-->
                                                        </div>
                                                        @{Html.BeginForm("insertFundRegis", "Fund", FormMethod.Post);}
                                                        <div class="form_fund" style="border:1px dotted #2196f3;">
                                                            <br />
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <div class="col-sm-2">
                                                                        เลือกรายการ
                                                                    </div>
                                                                    <div class="col-sm-3">
                                                                        @Html.DropDownList("fund_list", ViewData["fund"] as List<SelectListItem>, new { @class = "form-control" })
                                                                    </div>
                                                                    <div class="col-sm-2">
                                                                        วันที่เข้าเป็นสมาชิก
                                                                    </div>
                                                                    <div class="col-sm-3">
                                                                        @Html.TextBox("dateFund", "", new { @class = "form-control datepicker" })
                                                                        @Html.TextBox("emp_id", ViewData["emp_id"], new { @class = "form-control", @type = "hidden" })
                                                                    </div>
                                                                    <div class="col-sm-1">
                                                                        <a class="btn btn-primary addFund"> เพิ่ม</a>
                                                                    </div>

                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <div class="col-sm-12">
                                                                        <table class="table table-bordered table-responsive fund"></table>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <div class="col-sm-12 text-center">
                                                                        <input type="submit" class="btn btn-primary" value="บันทึกข้อมูล" />
                                                                        <input type="button" class="btn btn-default cancel_fund" value="ยกเลิก" />
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        @{Html.EndForm();}
                                                        <div class="data_fund">
                                                            <br />
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <div class="col-sm-12">
                                                                        <table class="table table-responsive table-bordered fundResult">
                                                                            <thead>
                                                                                <tr>
                                                                                    <th>ลำดับ</th>
                                                                                    <th>เลขที่กองทุน</th>
                                                                                    <th>ชื่อกองทุน</th>
                                                                                    <th>วันที่เข้าร่วม</th>
                                                                                    <th>วันที่บันทึกข้อมูล</th>
                                                                                    <th>จัดการ</th>
                                                                                </tr>
                                                                            </thead>
                                                                            <tbody>
                                                                                @{ int countFund = 1;}
                                                                                @foreach (var item in ViewData["data_fund"] as List<emp_fundRegisModel>)
                                                                                {
                                                                                    <tr>
                                                                                        <td>@countFund</td>
                                                                                        <td>@item.fund_code</td>
                                                                                        <td>@item.fr_fund_name</td>
                                                                                        <td>@Convert.ToDateTime(item.fr_date_start).ToString("dd MMMM yyyy")</td>
                                                                                        <td>@item.fr_submit_date</td>
                                                                                        <td>
                                                                                            @if (Convert.ToInt32(Convert.ToDateTime(item.fr_submit_date).ToString("yyyyMM",en)) < Convert.ToInt32(DateTime.Now.ToString("yyyyMM", en))) 
                                                                                            {

                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                <a href="#" class="btn btn-warning edit_fund" ref="@item.fr_id" data-toggle="modal" data-target="#myModalFund"><i class="fa fa-edit"></i> แก้ไขข้อมูล</a>
                                                                                                <a href="#" class="btn btn-danger delminus" ref="@item.fr_id"><i class="fa fa-trash"></i> ลบ</a>

                                                                                            }
                                                                                        </td>
                                                                                    </tr>
                                                                                    countFund++;
                                                                                }
                                                                            </tbody>
                                                                        </table>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <!---Modal Fund-->
                                                        <div class="modal fade" id="myModalFund" role="dialog">
                                                            <div class="modal-dialog">

                                                                <!-- Modal content-->
                                                                <div class="modal-content">
                                                                    @{ Html.BeginForm("editFund", "Fund", FormMethod.Post);}
                                                                    <div class="modal-header">
                                                                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                                                                        <h4 class="modal-title">แก้ไข กองทุนสำรองเลี้ยงชีพ</h4>
                                                                    </div>
                                                                    <div class="modal-body">
                                                                        <div class="form-group">
                                                                            <div class="row">
                                                                                <div class="col-sm-3">
                                                                                    กองทุนสำรองเลี้ยงชีพ
                                                                                </div>
                                                                                <div class="col-sm-9">
                                                                                    @Html.DropDownList("fund_name", ViewData["fund"] as List<SelectListItem>, new { @class = "form-control" })
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="form-group">
                                                                            <div class="row">
                                                                                <div class="col-sm-3">
                                                                                    วันที่เข้าร่วม
                                                                                </div>
                                                                                <div class="col-sm-9">
                                                                                    @Html.TextBox("fund_date", "", new { @class = "form-control datepicker" })
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        @Html.TextBox("emp_id", ViewData["emp_id"], new { @class = "form-control", @type = "hidden" })
                                                                        @Html.TextBox("fund_id", "", new { @class = "form-control", @type = "hidden" })
                                                                    </div>
                                                                    <div class="modal-footer">
                                                                        <input type="submit" class="btn btn-primary" value="แก้ไขข้อมูล" />
                                                                        <button type="button" class="btn btn-default" data-dismiss="modal">ยกเลิก</button>
                                                                    </div>
                                                                    @{ Html.EndForm();}
                                                                </div>

                                                            </div>
                                                        </div>
                                                        <!---End Fund-->
                                                    </div>
                                                    <div class="tab-pane fade" id="settings">
                                                        <div class="col-lg-6 col-md-6">
                                                            <h5 style="color:gray;font-weight:bold">ชมเชย</h5>
                                                            <hr />
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <div class="col-sm-12">
                                                                        <div class="commend_null">
                                                                            <a><span class="btn btn-default" style="border-style:dotted; border-width:2px;background-color:white;border-color:dodgerblue"><i class="fa fa-plus" style="color:dodgerblue"></i></span>  เพิ่มการชมเชย</a>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            @{ Html.BeginForm("insertCommend", "Commend", FormMethod.Post);}
                                                            <div class="form_commend" style="border:1px dotted #2196f3;">
                                                                <br />
                                                                <div class="form-group">
                                                                    <div class="row">
                                                                        <div class="col-sm-4">
                                                                            วันที่
                                                                        </div>
                                                                        <div class="col-sm-8">
                                                                            @Html.TextBox("commend_date", "", new { @class = "form-control datepicker" })
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group">
                                                                    <div class="row">
                                                                        <div class="col-sm-4">
                                                                            เรื่องชมเชย
                                                                        </div>
                                                                        <div class="col-sm-8">
                                                                            @Html.TextBox("title", "", new { @class = "form-control" })
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group">
                                                                    <div class="row">
                                                                        <div class="col-sm-4">
                                                                            รายละเอียดเพิ่มเติม
                                                                        </div>
                                                                        <div class="col-sm-8">
                                                                            @Html.TextArea("etc", "", new { @class = "form-control" })
                                                                            @Html.TextBox("emp_id", ViewData["emp_id"], new { @class = "form-control", @type = "hidden" })
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group">
                                                                    <div class="row">
                                                                        <div class="col-sm-12 text-center">
                                                                            <input type="submit" class="btn btn-primary" value="เพิ่มข้อมูล" />
                                                                            <input type="button" class="btn btn-default cancel_commend" value="ยกเลิก" />
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            @{ Html.EndForm();}


                                                            <div class="data_commend">

                                                                @foreach (var item in ViewData["data_commend"] as List<emp_commendModel>)
                                                                {
                                                                    <div class="panel panel-warning">
                                                                        <div class="panel-heading">
                                                                            <div class="row">
                                                                                <div class="col-sm-6">
                                                                                    <p class="text-left">เรื่อง : @item.comm_title</p>
                                                                                </div>
                                                                                <div class="col-sm-6">
                                                                                    <p class="text-right">วันที่ : @item.comm_date</p>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="panel-body">
                                                                            <p>@item.comm_detail</p>
                                                                        </div>
                                                                        <div class="panel-footer text-right">
                                                                            <a class="btn btn-warning edit_comm" ref="@item.comm_id" data-toggle="modal" data-target="#myModalComm"><i class="fa fa-edit"></i> แก้ไข</a>
                                                                            <a class="btn btn-danger del_comm" ref="@item.comm_id"><i class="fa fa-trash"></i> ลบ</a>
                                                                        </div>
                                                                    </div>
                                                                }
                                                            </div>
                                                            <!--Modal edit pay-->
                                                            <div class="modal fade" id="myModalComm" role="dialog">
                                                                <div class="modal-dialog">

                                                                    <!-- Modal content-->
                                                                    <div class="modal-content">
                                                                        @{ Html.BeginForm("editCommend", "Commend", FormMethod.Post);}
                                                                        <div class="modal-header">
                                                                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                                                                            <h4 class="modal-title">แก้ไข ชมเชย</h4>
                                                                        </div>
                                                                        <div class="modal-body">
                                                                            <div class="form-group">
                                                                                <div class="row">
                                                                                    <div class="col-sm-3">
                                                                                        วันที่
                                                                                    </div>
                                                                                    <div class="col-sm-9">
                                                                                        @Html.TextBox("comm_date_edit", "", new { @class = "form-control datepicker" })
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div class="form-group">
                                                                                <div class="row">
                                                                                    <div class="col-sm-3">
                                                                                        เรื่องที่ชมเชย
                                                                                    </div>
                                                                                    <div class="col-sm-9">
                                                                                        @Html.TextBox("comm_title_edit", "", new { @class = "form-control" })
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div class="form-group">
                                                                                <div class="row">
                                                                                    <div class="col-sm-3">
                                                                                        รายละเอียด
                                                                                    </div>
                                                                                    <div class="col-sm-9">
                                                                                        @Html.TextArea("comm_detail_edit", "", new { @class = "form-control" })
                                                                                        @Html.TextBox("comm_id_edit", "", new { @class = "form-control", @type = "hidden" })
                                                                                        @Html.TextBox("emp_id", ViewData["emp_id"], new { @class = "form-control", @type = "hidden" })
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="modal-footer">
                                                                            <input type="submit" class="btn btn-primary" value="แก้ไขข้อมูล" />
                                                                            <button type="button" class="btn btn-default" data-dismiss="modal">ยกเลิก</button>
                                                                        </div>
                                                                        @{ Html.EndForm();}
                                                                    </div>

                                                                </div>
                                                            </div>
                                                            <!--end modal-->
                                                        </div>
                                                        <div class="col-lg-6 col-md-6">
                                                            <h5 style="color:gray;font-weight:bold">ตักเตือน</h5>
                                                            <hr />
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <div class="col-sm-12">
                                                                        <div class="admonish_null">
                                                                            <a><span class="btn btn-default" style="border-style:dotted; border-width:2px;background-color:white;border-color:dodgerblue"><i class="fa fa-plus" style="color:dodgerblue"></i></span>  เพิ่มการตักเตือน</a>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            @{ Html.BeginForm("insertAdmonish", "Admonish", FormMethod.Post);}
                                                            <div class="form_admonish" style="border:1px dotted #2196f3;">
                                                                <br />
                                                                <div class="form-group">
                                                                    <div class="row">
                                                                        <div class="col-sm-4">
                                                                            วันที่
                                                                        </div>
                                                                        <div class="col-sm-8">
                                                                            @Html.TextBox("admonish_date", "", new { @class = "form-control datepicker" })
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group">
                                                                    <div class="row">
                                                                        <div class="col-sm-4">
                                                                            เรื่องตักเตือน
                                                                        </div>
                                                                        <div class="col-sm-8">
                                                                            @Html.TextBox("title", "", new { @class = "form-control" })
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group">
                                                                    <div class="row">
                                                                        <div class="col-sm-4">
                                                                            รายละเอียดเพิ่มเติม
                                                                        </div>
                                                                        <div class="col-sm-8">
                                                                            @Html.TextArea("etc", "", new { @class = "form-control" })
                                                                            @Html.TextBox("emp_id", ViewData["emp_id"], new { @class = "form-control", @type = "hidden" })
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group">
                                                                    <div class="row">
                                                                        <div class="col-sm-12 text-center">
                                                                            <input type="submit" class="btn btn-primary" value="เพิ่มข้อมูล" />
                                                                            <input type="button" class="btn btn-default cancel_admonish" value="ยกเลิก" />
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            @{Html.EndForm();}
                                                            <div class="data_admonish">
                                                                @foreach (var item in ViewData["data_admonish"] as List<emp_admonishModel>)
                                                                {
                                                                    <div class="panel panel-danger">
                                                                        <div class="panel-heading">
                                                                            <div class="row">
                                                                                <div class="col-sm-6">
                                                                                    <p class="text-left">เรื่อง : @item.adm_title</p>
                                                                                </div>
                                                                                <div class="col-sm-6">
                                                                                    <p class="text-right">วันที่ : @item.adm_date</p>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="panel-body">
                                                                            <p>@item.adm_detail</p>
                                                                        </div>
                                                                        <div class="panel-footer text-right">
                                                                            <a class="btn btn-warning edit_adm" ref="@item.adm_id" data-toggle="modal" data-target="#myModalAdm"><i class="fa fa-edit"></i> แก้ไข</a>
                                                                            <a class="btn btn-danger del_adm" ref="@item.adm_id"><i class="fa fa-trash"></i> ลบ</a>
                                                                        </div>
                                                                    </div>
                                                                }
                                                            </div>
                                                            <!--Modal edit pay-->
                                                            <div class="modal fade" id="myModalAdm" role="dialog">
                                                                <div class="modal-dialog">

                                                                    <!-- Modal content-->
                                                                    <div class="modal-content">
                                                                        @{ Html.BeginForm("editAdm", "Admonish", FormMethod.Post);}
                                                                        <div class="modal-header">
                                                                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                                                                            <h4 class="modal-title">แก้ไข ตักเตือน</h4>
                                                                        </div>
                                                                        <div class="modal-body">
                                                                            <div class="form-group">
                                                                                <div class="row">
                                                                                    <div class="col-sm-3">
                                                                                        วันที่
                                                                                    </div>
                                                                                    <div class="col-sm-9">
                                                                                        @Html.TextBox("adm_date_edit", "", new { @class = "form-control datepicker" })
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div class="form-group">
                                                                                <div class="row">
                                                                                    <div class="col-sm-3">
                                                                                        เรื่องที่ตักเตือน
                                                                                    </div>
                                                                                    <div class="col-sm-9">
                                                                                        @Html.TextBox("adm_title_edit", "", new { @class = "form-control" })
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div class="form-group">
                                                                                <div class="row">
                                                                                    <div class="col-sm-3">
                                                                                        รายละเอียด
                                                                                    </div>
                                                                                    <div class="col-sm-9">
                                                                                        @Html.TextArea("adm_detail_edit", "", new { @class = "form-control" })
                                                                                        @Html.TextBox("adm_id_edit", "", new { @class = "form-control", @type = "hidden" })
                                                                                        @Html.TextBox("emp_id", ViewData["emp_id"], new { @class = "form-control", @type = "hidden" })
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="modal-footer">
                                                                            <input type="submit" class="btn btn-primary" value="แก้ไขข้อมูล" />
                                                                            <button type="button" class="btn btn-default" data-dismiss="modal">ยกเลิก</button>
                                                                        </div>
                                                                        @{ Html.EndForm();}
                                                                    </div>

                                                                </div>
                                                            </div>
                                                            <!--end modal-->
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- /.panel-body -->
                                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    @Html.TextBox("max",ViewData["max_pay"],new { @class="form-control"})
    @Html.TextBox("max_minus", ViewData["max_minus"], new { @class = "form-control" })
   @Html.TextBox("tabEmp",tab,new { @class="form-control", @type="hidden"})

    <!-- /#page-wrapper -->
    <script src="~/lib/jquery/dist/jquery-3.2.1.min.js"></script>
    <link href="~/lib/datepicker-th/css/datepicker.css" rel="stylesheet" />
    <script src="~/lib/datepicker-th/js/bootstrap-datepicker.js"></script>
    <script>
        $(window).on('load',function() {

            $('.form_money').hide();
            $('.form_minus').hide();
            $('.form_fund').hide();
            $('.form_commend').hide();
            $('.form_admonish').hide();
            $('.form_position').hide();

            $('#emp_person_edit').val(@ViewData["emp_person_id"]);
            $('#emp_person_edit').select2();
            $('.uploadImg').hide();

            var txt = $("#tabEmp").val();

            if(txt != ""){

                $('.'+txt).click();

            }else{

                $('.position').click();
            }

           // var max = $('#max').val();
           // alert(max);

    


        });

        $(document).on('click','.money_null', function(){

            var max = $('#max').val();
            var res = max.split('/');
           // alert(res[2]+"-"+(res[1] - 1)+"-"+ res[0]);
            var   dt = new Date();
            dt.setFullYear(res[0],(res[1] - 1), res[2]);
            $('.datepicker_pay_start').datepicker({
                startDate: dt,
                autoclose: true,
                language: 'th-th',
                format: 'dd/mm/yyyy'
            });

           
            $('.money_null').hide();
            $('.form_money').show();


        })
        $(document).on('click', '.cancel_money', function(){

            $('.money_null').show();
            $('.form_money').hide();
            $('#money_start').removeAttr('disabled');
            $('#money_end').removeAttr('disabled');
            $('#money_start').val('');
            $('#money_end').val('');
            $('.money').html('');
            
            $('.money_list').html('');

            $.get('../../Employee/income_new', function(data){

                $('.money_list').html('<select id="money_list" name="money_list" class="form-control">'+data+'</select>');
                $('#totalMoney').val('');
                $('#money').val('');
            })

            
       
        })
        ///

        $(document).on('click','.minus_null', function(){


            
            var max = $('#max_minus').val();
            var res = max.split('/');
            // alert(res[2]+"-"+(res[1] - 1)+"-"+ res[0]);
            var   dt = new Date();
            dt.setFullYear(res[0],(res[1] - 1), res[2]);
            $('.datepicker_minus_start').datepicker({
                startDate: dt,
                autoclose: true,
                language: 'th-th',
                format: 'dd/mm/yyyy'
            });


            $('.minus_null').hide();
            $('.form_minus').show();
        })
        $(document).on('click', '.cancel_minus', function(){

            $('.minus_null').show();
            $('.form_minus').hide();
        })

        /// fund

        $(document).on('click','.fund_null', function(){

            $('.fund_null').hide();
            $('.form_fund').show();
        })
        $(document).on('click', '.cancel_fund', function(){

            $('.fund_null').show();
            $('.form_fund').hide();
        })
        $(document).on('click', '.edit_fund', function(){

            var txt = $(this).attr('ref');

            $.get('../../Fund/dataFund/?id='+txt, function(data){

                var res = data.split('^');

                $('#fund_name').val(res[1]);
                $('#fund_date').val(res[2]);
                $('#fund_id').val(res[0]);
               // alert(res[1]);

            })
          //  alert(txt);

        })
        ///

        $(document).on('click','.position_null', function(){

            $('.position_null').hide();
            $('.form_position').show();
        })
        $(document).on('click', '.cancel_position', function(){

            $('.position_null').show();
            $('.form_position').hide();
        })


        $(document).on('click', '.delminus', function(){
            swal({
                title: "คุณต้องการลบข้อมูลใช้หรือไม่?",
                text: "",
                type: "warning",
                showCancelButton: true,
                confirmButtonClass: "btn-danger",
                confirmButtonText: "ใช่! ลบข้อมูลนี้",
                cancelButtonText: "ยกเลิก",
                closeOnConfirm: false
            },
            function(){
                swal("ลบข้อมูล!", "ลบข้อมูลเรียบร้อยแล้ว.", "success");
            });

        })


        $(document).on('click', '.edPosition', function(){
           
            var x = $(this).attr('ref');

            $.get('../../Position/getdataForEdit?id='+x, function(data){

                var res = data.split('^');
                $('#position_edit').val(res[0]);
                $('#position_id').val(res[7]);
                $('#company_edit').val(res[1]);
                $('#section_edit').val(res[2]);
         
                $('#deptEdit').val(res[3]);
                $('#txtdepartment_edit').val(res[3]);
                $('#type_edit').val(res[4]);
                $('#start_edit').val(res[5]);
                $('#end_edit').val(res[6]);

                //

                $('#position_edit').select2();
                $('#company_edit').select2();
                $('#section_edit').select2();
                $('#deptEdit').select2();
                $('#type_edit').select2();


               // alert(data);

            })

           // alert(x);

        })
        /// changePosition
        $(document).on('click', '.changePosition', function(){
           
            var x = $(this).attr('ref');

            $.get('../../Position/getdataForEdit?id='+x, function(data){

                var res = data.split('^');
                $('#position_ch').val(res[0]);
                $('#position_id_ch').val(res[7]);
                $('#company_ch').val(res[1]);
                $('#section_ch').val(res[2]);
         
                $('#dept_ch').val(res[3]);
                $('#txtdepartment_edit').val(res[3]);
                $('#type_ch').val(res[4]);
                $('#start_ch').val(res[5]);
              //  $('#end_edit').val(res[6]);

                //

                $('#position_ch').select2();
                $('#company_ch').select2();
                $('#section_ch').select2();
                $('#dept_ch').select2();
                $('#type_ch').select2();


                // alert(data);

            })

            // alert(x);

        })


        //commend

        $(document).on('click', '.commend_null', function () {

            $('.commend_null').hide();
            $('.form_commend').show();

        })
        $(document).on('click', '.cancel_commend', function () {

            $('.commend_null').show();
            $('.form_commend').hide();
        })
        $(document).on('click','.edit_comm', function(){

            var comm = $(this).attr('ref');
            $.get('../../Commend/dataForEdit?comm='+comm, function(data){

                var res = data.split('^');
                $('#comm_id_edit').val(res[0]);
                $('#comm_date_edit').val(res[1]);
                $('#comm_title_edit').val(res[2]);
                $('#comm_detail_edit').val(res[3]);
            })
        })
        $(document).on('click','.del_comm', function(){

            var comm = $(this).attr('ref');
            swal({
                title: "คุณต้องการลบข้อมูลใช้หรือไม่?",
                text: "",
                type: "warning",
                showCancelButton: true,
                confirmButtonClass: "btn-danger",
                confirmButtonText: "ใช่! ลบข้อมูลนี้",
                cancelButtonText: "ยกเลิก",
                closeOnConfirm: false
            },
           function(){
               swal("ลบข้อมูล!", "ลบข้อมูลเรียบร้อยแล้ว.", "success");
           });
        })
        //admonish

        $(document).on('click', '.admonish_null', function () {

            $('.admonish_null').hide();
            $('.form_admonish').show();

        })
        $(document).on('click', '.cancel_admonish', function () {

            $('.admonish_null').show();
            $('.form_admonish').hide();
        })
        $(document).on('click','.edit_adm', function(){

            var comm = $(this).attr('ref');
            $.get('../../Admonish/dataForEdit?adm='+comm, function(data){

                var res = data.split('^');
                $('#adm_id_edit').val(res[0]);
                $('#adm_date_edit').val(res[1]);
                $('#adm_title_edit').val(res[2]);
                $('#adm_detail_edit').val(res[3]);
            })
        })

        ///

        function checkRowPay(){

            var select = $('#money_list option:selected').val();

            var num = $('.money').find('tr').length;

            var sum = 0;

            if(num == 0){

                $(".money").append("<tr>" +
               "<td><input id='test' name='test' class='form-control' value='" + $('#money_list option:selected').text() + "'/></td>" +
               "<td style='width:30%'><input class='form-control' id='pay' name='pay' value='" + $('#money').val() + "'/></td>" +
               "<td style='width:10%'><a class='btn btn-danger moveMoney' ><i class='fa fa-trash-o'></i> นำออก</a></td>" +
               "<td class='hidden' style='width:10%'><input class='form-control' id='income_id' name='income_id' value='" + $('#money_list option:selected').val() + "'/></td></tr>");


            }else{

                
                for (var i = 0; i < num; i++) {

             

                    var txt = $('.money').find('tr').eq(i).find('#income_id').val();
                    var check;

                    if(select == txt){

                        check = "N";
                        num = 0;

                    }else{

                        check = "Y";
              

                    }
                    //sum +=  parseFloat($('.fund').find('tr').eq(i).find('td').eq(1).text());

                  
                }


                if(check == "N"){


                    swal("ผิดพลาด !", "ไม่สามารถเพิ่มข้อมูลซ้ำได้", "error");
                   

                }else{

                    $(".money").append("<tr>" +
                "<td><input id='test' name='test' class='form-control' value='" + $('#money_list option:selected').text() + "'/></td>" +
                "<td style='width:30%'><input class='form-control' id='pay' name='pay' value='" + $('#money').val() + "'/></td>" +
                "<td style='width:10%'><a class='btn btn-danger moveMoney' ><i class='fa fa-trash-o'></i> นำออก</a></td>" +
                "<td class='hidden' style='width:10%'><input class='form-control' id='income_id' name='income_id' value='" + $('#money_list option:selected').val() + "'/></td></tr>");

                }

             
            }


        }
        //
      

        $(document).on('click', '#btnMoney', function () {

            var num1 = $('.money').find('tr').length+1;
            var l=1;
            for ( l= 1; l < num1; l++) {

            }


            checkRowPay();

            var sum = 0;
            var num = $('.money').find('tr').length;
            var sum_id = "";

            for (var i = 0; i < num; i++) {

                sum += parseFloat($('input[name=pay]').eq(i).val());

                sum_id += $('input[name=income_id]').eq(i).val();+ "^";

                
             //   var x=    $('.money').find('tr').eq(i).find('#income_id').val();
               // alert(x);

            }
            $('#totalMoney').val(sum.toFixed(2));
            //alert(sum_id);

            $('#money').val('');

        });
        $(document).on('click', '.moveMoney', function () {

            $(this).parent().parent().remove();
            var sum = 0;
            var num = $('.money').find('tr').length;
            var sum_id = "";

            for (var i = 0; i < num; i++) {

                sum += parseFloat($('input[name=pay]').eq(i).val());

                sum_id += $('input[name=income_id]').eq(i).val();+ "^";


            }
            $('#totalMoney').val(sum.toFixed(2));

        })

        $(document).on('keyup', 'input[name=pay]', function () {

            var sum = 0;
            var num = $('.money').find('tr').length;
            var sum_id = "";

            for (var i = 0; i < num; i++) {

                sum += parseFloat($('#pay' + (i + 1)).val());

                sum_id += $('#income_id' + (i + 1)).val() + "^";

            }
            $('#totalMoney').val(sum.toFixed(2));
        })

        //minus//
        function checkRowMinus(){

            var select = $('#minus_list option:selected').val();

            var num = $('.minus').find('tr').length;

            var sum = 0;

            if(num == 0){

                $(".minus").append("<tr><td><input id='txtminus' name='txtminus' value='" + $('#minus_list option:selected').text() + "' class='form-control'/></td><td style='width:30%'><input class='form-control' id='txtms_amount' name='txtms_amount' value='" + $('#minus').val() + "'/></td><td style='width:10%'><a class='btn btn-danger moveMinus'><i class='fa fa-trash-o'></i> นำออก</a></td><td class='hidden' style='width:10%'><input class='form-control' id='minus_id' name='minus_id' value='"+ $('#minus_list option:selected').val()+"'/></td></tr>");


            }else{

                
                for (var i = 0; i < num; i++) {

             

                    var txt = $('.minus').find('tr').eq(i).find('#minus_id').val();
                    var check;

                    if(select == txt){

                        check = "N";
                        num = 0;

                    }else{

                        check = "Y";
              

                    }
                    //sum +=  parseFloat($('.fund').find('tr').eq(i).find('td').eq(1).text());

                  
                }


                if(check == "N"){


                    swal("ผิดพลาด !", "ไม่สามารถเพิ่มข้อมูลซ้ำได้", "error");
                   

                }else{

                    $(".minus").append("<tr><td><input id='txtminus' name='txtminus' value='" + $('#minus_list option:selected').text() + "' class='form-control'/></td><td style='width:30%'><input class='form-control' id='txtms_amount' name='txtms_amount' value='" + $('#minus').val() + "'/></td><td style='width:10%'><a class='btn btn-danger moveMinus'><i class='fa fa-trash-o'></i> นำออก</a></td><td class='hidden' style='width:10%'><input class='form-control' id='minus_id' name='minus_id' value='"+ $('#minus_list option:selected').val()+"'/></td></tr>");

                }

             
            }


        }

        $(document).on('click', '#btnMinus', function () {


            var num1 = $('.minus').find('tr').length+1;
            var l=1;
            for ( l= 1; l < num1; l++) {

            }


            checkRowMinus();

            //$(".minus").append("<tr><td><input id='txtminus' name='txtminus' value='" + $('#minus_list option:selected').text() + "' class='form-control'/></td><td style='width:30%'><input class='form-control' id='txtms_amount' name='txtms_amount' value='" + $('#minus').val() + "'/></td><td style='width:10%'><a class='btn btn-danger moveMinus'><i class='fa fa-trash-o'></i> นำออก</a></td><td class='hidden' style='width:10%'><input class='form-control' id='minus_id' name='minus_id' value='"+ $('#minus_list option:selected').val()+"'/></td></tr>");


            var sum = 0;
            var num = $('.minus').find('tr').length;
            var sum_id = "";

            for (var i = 0; i < num; i++) {

                sum += parseFloat($('input[name=txtms_amount]').eq(i).val());

                sum_id += $('input[name=minus_id]').eq(i).val();+ "^";

            }
            $('#totalMinus').val(sum.toFixed(2));
            //alert(sum_id);

            $('#minus').val('');


        });
        $(document).on('click', '.moveMinus', function () {

            $(this).parent().parent().remove();
            var sum = 0;
            var num = $('.minus').find('tr').length;
            var sum_id = "";

            for (var i = 0; i < num; i++) {

                sum += parseFloat($('input[name=txtms_amount]').eq(i).val());

                sum_id += $('input[name=minus_id]').eq(i).val();+ "^";

            }
            $('#totalMinus').val(sum.toFixed(2));

        })

        //กองทุน//

        function checkRow(){

            var select = $('#fund_list option:selected').val();

            var num = $('.fund').find('tr').length;

            var sum = 0;

            if(num == 0){

                $(".fund").append("<tr><td><input id='fundName' name='fundName' class='form-control' value='" + $('#fund_list option:selected').text() + "'/></td><td style='width:30%'><input id='dateFundStart' name='dateFundStart' class='form-control' value='" + $('#dateFund').val() + "'/></td><td style='width:10%'><a class='btn btn-danger moveFund' ><i class='fa fa-trash-o'></i> นำออก</a></td><td class='hidden' style='width:10%'><input class='form-control' id='fundId' name='fundId' value='"+ $('#fund_list option:selected').val()+"'/></td></tr>");

            }else{

                
                for (var i = 0; i < num; i++) {

             

                    var txt = $('.fund').find('tr').eq(i).find('#fundId').val();
                    var check;

                    if(select == txt){

                        check = "N";
                        num = 0;

                    }else{

                        check = "Y";
              

                    }
                    //sum +=  parseFloat($('.fund').find('tr').eq(i).find('td').eq(1).text());

                  
                }


                if(check == "N"){


                    swal("ผิดพลาด !", "ไม่สามารถเพิ่มข้อมูลซ้ำได้", "error");
                   

                }else{

                    $(".fund").append("<tr><td><input id='fundName' name='fundName' class='form-control' value='" + $('#fund_list option:selected').text() + "'/></td><td style='width:30%'><input id='dateFundStart' name='dateFundStart' class='form-control' value='" + $('#dateFund').val() + "'/></td><td style='width:10%'><a class='btn btn-danger moveFund' ><i class='fa fa-trash-o'></i> นำออก</a></td><td class='hidden' style='width:10%'><input class='form-control' id='fundId' name='fundId' value='"+ $('#fund_list option:selected').val()+"'/></td></tr>");
             
                }

             
            }


        }



        $(document).on('click', '.addFund', function () {


            var check_result = $('.fundResult').find('tr').length;
            if(check_result == 1){

                checkRow();

            }else{


                var fundName = $('#fund_list option:selected').text();
                var res = fundName.split(' |');
                var ch;

                for(var j = 1; j< check_result; j++){

                    var txt = $('.fundResult').find('tr').eq(j).find('td').eq(1).text();

                  //  alert(txt +"="+ res[0]);

                    if(txt == res[0]){

                        ch = "N";
                       
                        check_result = 0;

                    }else{

                        ch = "Y";
                     
                    }


                }

                if(ch == "N"){

                    swal("ผิดพลาด !", "ไม่สามารถเพิ่มข้อมูลซ้ำได้", "error");

                
                }else{

                    checkRow();

                }

               // 

            }


          
       
            // $('#totalFund').val(sum.toFixed(2));

        });
        $(document).on('click', '.moveFund', function () {

            $(this).parent().parent().remove();

        })

    </script>
    <script>
        var cap_start ="";
        var cap_end = "";
        var cap_href= "";

        $(document).on('click', '.valcap', function () {

            var aa = $(this).attr('ref');
            var txt = $(this).attr('href');
            cap_href = txt;
            var res = aa.split('^');
          
            var dt_start = res[0];
            var dt_end = res[1];
            cap_start = res[0];
            cap_end = res[1];
         
                $.get('../Pay/getdata?start=' + dt_start + "&end=" + dt_end + "&emp=" + @ViewData["emp_id"], function (data) {

             
                    $('' + txt + '').html("<table class='table table-responsive table-bordered'>" +
                                "<tr><th class='text-center'>ลำดับ</th><th class='text-center'>รายการ</th><th>รวม</th><th class='text-center'>จัดการ</th><th class='hidden'></th></tr>" +
                                data +
                                "</table>");
                })

        })
        var len = "";
        var cap = "";
        var come_old = "";
        $(document).on('click', '.payEdit', function(){

            var x = $(this).attr('ref');

         //   alert($(this).parent().parent().parent().parent().find());


            len = $(this).parent().parent().parent().find('tr').length;

            cap = $(this).parent().parent().parent().parent().parent().parent().find('.valcap').attr('href');
           // alert(cap);

            $.get('../../Pay/data_update?pay='+x, function(data){

               // alert(data);

                var res = data.split('^');

                $('#income_edit').val(res[1]);
                come_old = res[1];
                $('#amount_update').val(res[2]);

            })
            
            $('#pay_id').val(x);


        })


        $(document).on('change', '#income_edit', function(){

            var x=  $('#income_edit').val();
            var txt=  $('#income_edit :selected').text();
         //   alert(x);

            var i = 0;
            var each = len;
            var c = cap;

            for(i = 1; i< each; i++){

                var a = $(c).find('table').eq(0).find('tr').eq(i).find('td').eq(4).text();

                if(a == x){

                    swal("ผิดพลาด !", "ไม่สามารถเลือก '"+txt+"' ได้เนื่องจากมีข้อมูลอยู่แล้ว", "error");

                    i=each;

                    $('#income_edit').val(come_old);

                }else{


                }

               // alert(a);
            }


        })
        $(document).on('click', '.payDel', function(){

            var x = $(this).attr('ref');
            // alert(x);

            swal({
                title: "คุณต้องการลบข้อมูลนี้ใช่หรือไม่?",
                // text: "คุณจะไม่่สามารถ",
                type: "warning",
                showCancelButton: true,
                confirmButtonColor: "red",
                confirmButtonText: "Yes, delete it!",
                cancelButtonText: "No, cancel plx!",
                closeOnConfirm: false,
                closeOnCancel: false
            },
       function (isConfirm) {
           if (isConfirm) {

               $.get('../../Pay/del_Pay?id='+x, function(){

                   swal("ลบข้อมูลเรียบร้อย!", "", "success");

                   $.get('../Pay/getdata?start=' + cap_start + "&end=" + cap_end + "&emp=" + @ViewData["emp_id"], function (data) {

             
                       $('' + cap_href + '').html("<table class='table table-responsive table-bordered'>" +
                                   "<tr><th class='text-center'>ลำดับ</th><th class='text-center'>รายการ</th><th class='text-center'>รวม</th><th class='text-center'>จัดการ</th><th class='hidden'></th></tr>" +
                                   data +
                                   "</table>");
                   })

               })


           } else {
               swal("ยกเลิก", "", "error");
           }
       });

          

        })
        $(document).on('click', '.plusPay', function(){

            var x  = $(this).attr('ref');
            var res = x.split('^');
            var emp = $('#emp_id').val();
           /// alert(res[0] + res[1]);
          
            $('.money_null').click();

            $.get('../../Employee/plusPay?emp='+emp+'&start='+res[0]+'&end='+res[1], function(data){

                var result = data.split('^');

                $('#money_list').focus();

                var ds = result[0].split('/');
                var dn = result[1].split('/');

                var ys = parseInt(ds[2])+543;
                var yn = parseInt(dn[2])+543;

                $('#money_start').val(ds[0]+"/"+ds[1]+"/"+ys);
                $('#money_end').val(dn[0]+"/"+dn[1]+"/"+yn);

                $('#money_start').attr('value', ds[0]+"/"+ds[1]+"/"+ys);
                $('#money_end').attr('value',dn[0]+"/"+dn[1]+"/"+yn);

                $('.money_list').html('');
                $('.money_list').html('<select id="money_list" name="money_list" class="form-control">'+result[2]+'</select>');

                $('#money_start').attr('disabled', '');
                $('#money_end').attr('disabled', '');


            })

        })
        $(document).on('click', '.submitPay', function(){

            $('#money_start').removeAttr('disabled');
            $('#money_end').removeAttr('disabled');

        })
    </script>
    <script>
        $(document).on('click', '.plusMinus', function(){

            var x  = $(this).attr('ref');
            var res = x.split('^');
            var emp = $('#emp_id').val();
           // alert(res[0] + res[1]);

            $('.minus_null').click();

          //  $('#minus_list').focus();

            $.get('../../Employee/plusMinus?emp='+emp+'&start='+res[0]+'&end='+res[1], function(data){

                var result = data.split('^');

                $('#minus_list').focus();

                var ds = result[0].split('/');
                var dn = result[1].split('/');

                var ys = parseInt(ds[2])+543;
                var yn = parseInt(ds[2])+543;

                $('#minus_start').val(ds[0]+"/"+ds[1]+"/"+ys);
                $('#minus_end').val(dn[0]+"/"+dn[1]+"/"+yn);

                $('#minus_start').attr('value', ds[0]+"/"+ds[1]+"/"+ys);
                $('#minus_end').attr('value',dn[0]+"/"+dn[1]+"/"+yn);

                $('.minus_list').html('');
                $('.minus_list').html('<select id="minus_list" name="minus_list" class="form-control">'+result[2]+'</select>');

                $('#minus_start').attr('disabled', '');
                $('#minus_end').attr('disabled', '');


            })

        })
        $(document).on('click', '.submitMinus', function(){

            $('#minus_start').removeAttr('disabled');
            $('#minus_end').removeAttr('disabled');

        })
        var cap_m_start ="";
        var cap_m_end = "";
        var cap_m_href= "";

        $(document).on('click', '.valcapj', function () {

            var aa = $(this).attr('ref');
           // alert(aa);

            var txt = $(this).attr('href');
            cap_m_href = txt;
            var res = aa.split('^');


            var dt_start = res[0];
            var dt_end = res[1];
            cap_m_start = res[0];
            cap_m_end = res[1];

              //  var start = res_start[0] + "-" + month + "-" + res_start[2];
             //   var end = res_end[1] + "-" + month_end + "-" + res_end[3];

                $.get('../Minus/getdata?start=' + dt_start + "&end=" + dt_end + "&emp=" + @ViewData["emp_id"], function (data) {


                    $('' + txt + '').html("<table class='table table-responsive table-bordered'>" +
                                "<tr><th>ลำดับ</th><th>รายการ</th><th>รวม</th><th>จัดการ</th><th class='hidden'></th></tr>" +
                                data +
                                "</table>");


                })

        })
        var len_m = "";
        var cap_m = "";
        var m_old = "";

        $(document).on('click', '.minusEdit', function(){

            var x = $(this).attr('ref');

            $('#minusId').val(x);

            len_m = $(this).parent().parent().parent().find('tr').length;

            cap_m = $(this).parent().parent().parent().parent().parent().parent().find('.valcapj').attr('href');

            $.get('../../Minus/data_update?minus='+x, function(data){

                var res = data.split('^');

                $('#minus_edit').val(res[1]);
                m_old = res[1];
                $('#amountMinus').val(res[2]);

            })

          //  alert(x);

        })
        $(document).on('change', '#minus_edit', function(){

            var x=  $('#minus_edit').val();
            var txt=  $('#minus_edit :selected').text();
            //   alert(x);

            var i = 0;
            var each = len_m;
            var c = cap_m;

            for(i = 1; i< each; i++){

                var a = $(c).find('table').eq(0).find('tr').eq(i).find('td').eq(4).text();

                if(a == x){

                    swal("ผิดพลาด !", "ไม่สามารถเลือก '"+txt+"' ได้เนื่องจากมีข้อมูลอยู่แล้ว", "error");

                    i=each;

                    $('#minus_edit').val(m_old);

                }else{


                }

                // alert(a);
            }


        })
        //
        $(document).on('click', '.minusDel', function(){

            var x = $(this).attr('ref');
            // alert(x);

            swal({
                title: "คุณต้องการลบข้อมูลนี้ใช่หรือไม่?",
                // text: "คุณจะไม่่สามารถ",
                type: "warning",
                showCancelButton: true,
                confirmButtonColor: "red",
                confirmButtonText: "Yes, delete it!",
                cancelButtonText: "No, cancel plx!",
                closeOnConfirm: false,
                closeOnCancel: false
            },
       function (isConfirm) {
           if (isConfirm) {

               $.get('../../Minus/del_Minus?id='+x, function(){

                   swal("ลบข้อมูลเรียบร้อย!", "", "success");

                    $.get('../Minus/getdata?start=' + cap_m_start + "&end=" + cap_m_end + "&emp=" + @ViewData["emp_id"], function (data) {


                    $('' + cap_m_href + '').html("<table class='table table-responsive table-bordered'>" +
                                "<tr><th>ลำดับ</th><th>รายการ</th><th>รวม</th><th>จัดการ</th><th class='hidden'></th></tr>" +
                                data +
                                "</table>");


                })

               })


           } else {
               swal("ยกเลิก", "", "error");
           }
       });



        })
    </script>
<script>
    function myFunctionCompany() {

        var x = document.getElementById("company").value;

        $.get('../DepartmentList/getSection?comp=' + x, function (data) {

            $('.dropSect').html('');
            $('.dropSect').html('<select id="section" class="form-control select2" onchange="myFunctionSection()">' + data + '</select>');
            $('#section').select2();

        })

    };

    function myFunctionSection() {

        var x = document.getElementById("section").value;
        var x2 = document.getElementById("company").value;

        $('#txtsection').val(x);

        $.get('../DepartmentList/getDept?comp=' + x2 + '&sect=' + x, function (data) {

            $('.dropDept').html('');
            $('.dropDept').html('<select id="department" class="form-control select2"  onchange="myFunctionDept()">' + data + '</select>');
            $('#department').select2();

        })

    };

    function myFunctionDept() {

        var x = document.getElementById("department").value;

        //alert(x);

        $('#txtdepartment').val(x);

    }

    function myFunctionCompanyEdit() {

        var x = document.getElementById("company_edit").value;

        $.get('../DepartmentList/getSection?comp=' + x, function (data) {

            $('.dropSectEdit').html('');
            $('.dropSectEdit').html('<select id="section_edit" name="section_edit" class="form-control select2" onchange="myFunctionSectionEdit()">' + data + '</select>');
            $('#section_edit').select2();

        })

    };

    function myFunctionSectionEdit() {

        var x = document.getElementById("section_edit").value;
        var x2 = document.getElementById("company_edit").value;

      //  $('#txtsection').val(x);

        $.get('../DepartmentList/getDept?comp=' + x2 + '&sect=' + x, function (data) {

            $('.dropDeptEdit').html('');
            $('.dropDeptEdit').html('<select id="deptEdit" name="deptEdit" class="form-control select2">' + data + '</select>');
            $('#deptEdit').select2();

        })

    };
    
    ///position Change
    function myFunctionCompanyChange() {

        var x = document.getElementById("company_ch").value;

        $.get('../DepartmentList/getSection?comp=' + x, function (data) {

            $('.sectChange').html('');
            $('.sectChange').html('<select id="section_ch"  name="section_ch" class="form-control select2" onchange="myFunctionSectionChange()">' + data + '</select>');
            $('#section_ch').select2();

        })

    };

    function myFunctionSectionChange() {

        var x = document.getElementById("section_ch").value;
        var x2 = document.getElementById("company_ch").value;

        $.get('../DepartmentList/getDept?comp=' + x2 + '&sect=' + x, function (data) {

            $('.deptChange').html('');
            $('.deptChange').html('<select id="dept_ch" name="dept_ch" class="form-control select2">' + data + '</select>');
            $('#dept_ch').select2();

        })

    };

</script>
    <script>
        function readURL(input) {

            if (input.files && input.files[0]) {
                var reader = new FileReader();
             

                reader.onload = function(e) {
                    $('#imgEmp').attr('src', e.target.result);
                  
                   
                }

                reader.readAsDataURL(input.files[0]);
              
            }
           
   
        }

        $("#selectFile").change(function() {
            readURL(this);
            
            $('.uploadImg').show();

        });
    </script>
  <script>
      function tab($txt){

         // alert($txt);
          $.get('../../Menu/empTab?tab='+$txt, function(){



          })
      }
  </script>
    @*<script>
        $(document).on('click', '.delPosition', function(){

            var x = $(this).attr('ref');
            var y = @ViewData["emp_id"]


            $.get('../../Position/del_position?id='+x)

        })
    </script>*@
    <script>
        $(document).on('click', '.changeMain', function(){

            var x = $(this).attr('ref');
            var em = @ViewData["emp_id"];
            
            alert(x+"-"+em);

            $.post( "../../Position/change_main", { emp: em, position: x })
              .done(function( data ) {
                  
                  location.reload();

              });

        })
    </script>
    <script>
        $(document).on('click', '.resign_position', function(){

            var x = $(this).attr('ref');

            $('#prs_ref_emp_position_id').val(x);


        })
    </script>
<script>
    $(document).on('click', '.cancelPay', function(){

        var txt = $(this).attr('ref');
        var res = txt.split('^');
        var start = res[0];
        var end = res[1];

        var emp = $('#emp_id').val();

       // alert(emp);
        var group = $(this).parent().parent().find('a').eq(0).text();

      //  alert(group);

        swal({
            title: "คุณต้องการลบชุดข้อมูลใช่หรือไม่?",
            text: "ชุดข้อมูลของวันที่ "+group+" จะถูกยกเลิก",
            type: "warning",
            showCancelButton: true,
            confirmButtonColor: "red",
            confirmButtonText: "ใช่, ยกเลิกชุดข้อมูลนี้!",
            cancelButtonText: "ไม่",
            closeOnConfirm: false,
            closeOnCancel: false
        },
       function (isConfirm) {
           if (isConfirm) {

               $.get('../../Employee/cancel_minus?emp=' + emp+'&start='+start+'&end='+end, function () {

                   swal("ยกเลิกชุดข้อมูลเรียบร้อยแล้ว!", "", "success");
                   location.reload();
               })

           } else {

               swal("ยกเลิกแล้ว", "", "error");
           }
       });


    })
</script>

