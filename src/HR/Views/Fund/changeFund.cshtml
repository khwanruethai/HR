@{
    Layout = "_Layout";
}
@using HR.Models
@using System.Globalization
@{
    CultureInfo en = new CultureInfo("EN");
}
<div id="page-wrapper">
    <div class="row">
        <div class="col-lg-12">
            <h1 class="page-header">ประวัติการลาออกจากกองทุนของพนักงาน</h1>
        </div>
        <!-- /.col-lg-12 -->
    </div>
    <div class="form-group">
        <div class="row">
            <div class="col-sm-12 text-right">
                <a href="@Url.Action("addResignChange","Fund")" class="btn btn-primary"><span><i class="fa fa-plus-square-o"></i>  บันทึกการเปลี่ยน/ย้าย กองทุนของพนักงาน</span></a>
            </div>
        </div>
    </div>
    <div class="form-group">
        <div class="row">
            <div class="col-lg-12">
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        ประวัติการเปลี่ยน/ย้าย กองทุนของพนักงาน
                    </div>
                    <div class="panel-body">
                        <div class="form-group">
                            <div class="row">
                                <div class="col-lg-12">
                                    <div class="table-responsive">
                                        <table class="table table-bordered table-responsive dataTable">
                                            <thead>
                                                <tr>
                                                    <th rowspan="2" class="text-center">ลำดับ</th>
                                                    <th colspan="6" class="text-center">ข้อมูลพนักงาน</th>
                                                    <th colspan="4" class="text-center">ข้อมูลกองทุนเดิม</th>
                                                    <th colspan="3" class="text-center">ข้อมูลกองทุนใหม่</th>
                                                    <th rowspan="2" style="border-width: 1px;" class="text-center">ประเภทการโอน/ย้าย</th>
                                                    <th rowspan="2" style="border-width: 1px;" class="text-center"><span><i class="fa fa-gears"></i></span> จัดการ</th>
                                                </tr>
                                                <tr>
                                                    <th class="text-center">รหัสพนักงาน</th>
                                                    <th class="text-center">ชื่อ-นามสกุล</th>
                                                    <th class="text-center">ตำแหน่ง</th>
                                                    <th class="text-center">บริษัท</th>
                                                    <th class="text-center">ฝ่าย</th>
                                                    <th class="text-center">แผนก</th>
                                                    <th class="text-center">รหัสกองทุน</th>
                                                    <th class="text-center">ชื่อกองทุน</th>
                                                    <th class="text-center">วันที่เข้าร่วม</th>
                                                    <th class="text-center">อายุสมาชิก(วัน)</th>
                                                    <th class="text-center">รหัสกองทุน</th>
                                                    <th class="text-center">ชื่อกองทุน</th>
                                                    <th class="text-center">วันที่เข้าร่วม</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                @{ int i = 1;}
                                                @foreach (var item in ViewData["changeFund"] as List<empFundChange>)
                                                {
                                             <tr>
                                                 <td>@i</td>
                                                 <td>@item.emp_code</td>
                                                 <td>@item.emp_name</td>
                                                 <td>@item.position</td>
                                                 <td>@item.comp</td>
                                                 <td>@item.sect</td>
                                                 <td>@item.dept</td>
                                                 <td>@item.fund_code_old</td>
                                                 <td>@item.fund_name_old</td>
                                                 <td>@item.cf_fund_start_old</td>
                                                 <td>@item.cf_fund_age_old</td>
                                                 <td>@item.fund_code_new</td>
                                                 <td>@item.fund_name_new</td>
                                                 <td>@item.cf_fund_start_new</td>

                                                 @if (item.cf_change_type == "C")
                                                 {
                                                     <td class="text-center"><span class="btn btn-info"><i class="fa fa-home"></i>  ย้ายบริษัท</span></td>

                                                 }
                                                 else if (item.cf_change_type == "F")
                                                 {


                                                    <td class="text-center"><span class="btn btn-success"><i class="fa fa-home"></i>  ย้ายกองทุน</span></td>
                                                 }
                                                 else
                                                 {
                                                    <td class="text-center"><span class="btn btn-warning"><i class="fa fa-home"></i>  ย้ายบริษัทและกองทุน</span></td>


                                                 }

                                               
                                                 <td class="text-center">
                                                     <div class="form-group responsive">
                                                         <div class="row">
                                                             <div class="col-md-12">
                                                                 <a class="btn btn-primary" href="@Url.Action("emp","Employee",new { code = item.cf_ref_emp_id})"><i class="fa fa-search"></i> ดูข้อมูลพนักงาน</a><br />
                                                             </div>

                                                         </div>
                                                     </div>
                                                     @*<div class="form-group responsive">
                                                         <div class="row">

                                                             <div class="col-md-12">
                                                                 <a class="btn btn-info"><i class="fa fa-search"></i> ดูรายละเอียดกองทุน</a><br />
                                                             </div>
                                                         </div>
                                                     </div>*@

                                                     @*@if (Convert.ToInt32(item.cf_submit_date) < Convert.ToInt32(DateTime.Now.ToString("yyyyMM", en)))
                                                     {

                                                     }
                                                     else
                                                     {

                                                         <a class="btn btn-warning"><i class="fa fa-edit"></i> แก้ไข</a>
                                                         <a class="btn btn-danger"><i class="fa fa-trash"></i> ลบ</a>

                                                     }*@

                                                 </td>
                                             </tr>
                                                    i++;
                                                }
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="~/lib/jquery/dist/jquery-3.2.1.min.js"></script>
    @*<script>
            $(document).on('click', '.delResign', function () {

            var x = $(this).attr('ref');

            swal({
                title: "คุณต้องการลบข้อมูลนี้ใช่หรือไม่?",
                text: "สถานะการลาออกของพนักงานจะถูกยกเลิกให้เป็นปกติ!",
                type: "warning",
                showCancelButton: true,
                confirmButtonColor: "red",
                confirmButtonText: "ใช่, ลบข้อมูล",
                cancelButtonText: "ไม่, ยกเลิกการลบ!",
                closeOnConfirm: false,
                closeOnCancel: false
            },
            function (isConfirm) {
                if (isConfirm) {

                    $.get('../../EmpResign/del_resign?id=' + x, function () {

                        swal("ลบข้อมูลเรียบร้อย!", "", "success");
                        location.reload();
                    })

                } else {
                    swal("ยกเลิก", "", "error");
                }
            });

        });
        </script>*@
